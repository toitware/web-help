<!doctype html><html data-stencil-build="ipl7c29e" class="hydrated"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><style sty-id="sc-discord-messages">@import url('https://fonts.bunny.net/css?family=roboto:400,500,700');@font-face{font-family:'Whitney';src:url('https://cdn.jsdelivr.net/gh/ItzDerock/discord-components@master/assets/fonts/Book.woff') format('woff');font-weight:400;font-display:swap}@font-face{font-family:'Whitney';src:url('https://cdn.jsdelivr.net/gh/ItzDerock/discord-components@master/assets/fonts/Medium.woff') format('woff');font-weight:500;font-display:swap}@font-face{font-family:'Whitney';src:url('https://cdn.jsdelivr.net/gh/ItzDerock/discord-components@master/assets/fonts/Semibold.woff') format('woff');font-weight:600;font-display:swap}@font-face{font-family:'Whitney';src:url('https://cdn.jsdelivr.net/gh/ItzDerock/discord-components@master/assets/fonts/Bold.woff') format('woff');font-weight:700;font-display:swap}.discord-messages{color:#fff;background-color:#36393e;display:block;font-size:16px;font-family:Whitney, 'Source Sans Pro', ui-sans-serif, system-ui, -apple-system, 'system-ui', 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
		sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';line-height:170%;border:1px solid rgba(255, 255, 255, 0.05)}.discord-messages.discord-light-theme{color:#747f8d;background-color:#fff;border-color:#dedede}.discord-messages.discord-no-background{background-color:unset}</style><style sty-id="sc-discord-header">.discord-header{display:flex;flex-direction:row;max-height:5rem;padding:0.5rem;gap:0.5rem;border-bottom:1px solid rgba(79, 84, 92, 0.48)}.discord-header-icon{float:left;width:5rem}.discord-header-icon>div{background-color:rgb(79, 84, 92);border-radius:50%;width:5rem;height:5rem;text-align:center;align-items:center;justify-content:center;display:flex;font-size:xx-large}.discord-header-icon>img{border-radius:50%;width:auto;height:100%}.discord-header-text{flex-grow:1}.discord-header-text-guild{font-size:1.5rem;font-weight:bold}</style><style sty-id="sc-discord-message">.discord-message{color:#dcddde;display:flex;flex-direction:column;font-size:0.9em;font-family:Whitney, 'Source Sans Pro', ui-sans-serif, system-ui, -apple-system, 'system-ui', 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
		sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';padding:0px 1em;position:relative;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;padding-right:0;min-height:1.375rem;padding-right:48px !important;margin-top:1.0625rem}.discord-message .discord-message-inner{display:flex;position:relative;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.discord-message.discord-highlight-mention,.discord-message.discord-highlight-ephemeral{padding-right:5px;position:relative}.discord-message.discord-highlight-mention::before,.discord-message.discord-highlight-ephemeral::before{content:'';position:absolute;display:block;top:0;left:0;bottom:0;pointer-events:none;width:2px}.discord-message.discord-highlight-mention{background-color:rgba(250, 166, 26, 0.1)}.discord-light-theme .discord-message.discord-highlight-mention{background-color:rgba(250, 166, 26, 0.1)}.discord-message.discord-highlight-mention:hover{background-color:rgba(250, 166, 26, 0.08)}.discord-light-theme .discord-message.discord-highlight-mention:hover{background-color:rgba(250, 166, 26, 0.2)}.discord-message.discord-highlight-mention::before{background-color:#faa61a}.discord-message.discord-highlight-ephemeral{background-color:rgba(88, 101, 242, 0.05)}.discord-light-theme .discord-message.discord-highlight-ephemeral{background-color:rgba(250, 166, 26, 0.1)}.discord-message.discord-highlight-ephemeral:hover{background-color:rgba(88, 101, 242, 0.1)}.discord-message.discord-highlight-ephemeral::before{background-color:#5865f2}.discord-light-theme .discord-message{color:#2e3338;border-color:#eceeef}.discord-message a{color:#00aff4;font-weight:normal;text-decoration:none}.discord-message a:hover{text-decoration:underline}.discord-light-theme .discord-message a{color:#00b0f4}.discord-message a:hover{text-decoration:underline}.discord-message .discord-author-avatar{margin-right:16px;margin-top:5px;min-width:40px;z-index:1}.discord-message .discord-author-avatar img{width:40px;height:40px;border-radius:50%}.discord-message .discord-message-timestamp{color:#72767d;font-size:12px;margin-left:3px}.discord-light-theme .discord-message .discord-message-timestamp{color:#747f8d}.discord-message .discord-message-edited{color:#72767d;font-size:10px}.discord-light-theme .discord-message .discord-message-edited{color:#99aab5}.discord-message .discord-message-content{width:100%;line-height:160%;font-weight:normal;padding-top:2px}.discord-message .discord-message-body{font-size:1rem;font-weight:400;word-break:break-word;position:relative}.discord-message .discord-message-body strong{font-weight:700}.discord-message .discord-message-body em{font-style:italic}.discord-message .discord-message-body u{text-decoration-color:rgb(220, 221, 222);text-decoration-line:underline;text-decoration-style:solid;text-decoration-thickness:auto}.discord-message .discord-message-body pre{border:1px solid #202225;border-radius:4px}.discord-message .discord-message-body code{background:#2f3136;white-space:break-spaces;font-family:Consolas, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono,
		Liberation Mono, Nimbus Mono L, Monaco, Courier New, Courier, monospace}.discord-light-theme .discord-message .discord-message-timestamp,.discord-compact-mode .discord-message:hover .discord-message-timestamp,.discord-compact-mode.discord-light-theme .discord-message:hover .discord-message-timestamp{color:#99aab5}.discord-compact-mode.discord-light-theme .discord-message .discord-message-timestamp{color:#d1d9de}.discord-compact-mode .discord-message .discord-message-timestamp{display:inline-block;width:3.1rem;text-align:right;font-size:0.6875rem;line-height:1.375rem;margin-right:0.25rem;margin-left:0;text-indent:0}.discord-compact-mode .discord-message{margin-top:unset}.discord-compact-mode .discord-message .discord-message-body{line-height:1.375rem;padding-left:10px;text-indent:-6px}.discord-compact-mode .discord-message .discord-message-compact-indent{padding-left:10px}.discord-message:first-child{margin-top:0.5rem}.discord-message:last-child{margin-bottom:0.5rem;border-bottom-width:0}.discord-message .discord-message-markup{font-size:1rem;line-height:1.375rem;word-wrap:break-word;user-select:text;font-weight:400}.discord-compact-mode .discord-author-avatar{display:none}.discord-message:hover{background-color:rgba(4, 4, 5, 0.07)}.discord-light-theme .discord-message:hover{background-color:rgba(6, 6, 7, 0.02)}.discord-message.discord-message-has-thread:after{width:2rem;left:2.2rem;top:1.75rem;border-left:2px solid #4f545c;border-bottom:2px solid #4f545c;border-bottom-left-radius:8px;bottom:29px;content:'';position:absolute}.discord-light-theme .discord-message.discord-message-has-thread:after{border-color:#747f8d}.discord-message-ephemeral{color:#72767d;margin-top:4px;font-size:12px;font-weight:400;color:#72767d}.discord-light-theme .discord-message-ephemeral{color:#747f8d}.discord-message-ephemeral .discord-message-ephemeral-link{color:#00aff4;font-weight:500;cursor:pointer}.discord-message-ephemeral .discord-message-ephemeral-link:hover{text-decoration:underline}.discord-message-ephemeral .discord-message-ephemeral-icon{margin-right:4px;vertical-align:text-bottom}.discord-message .discord-author-info{display:inline-flex;align-items:center;font-size:16px;margin-right:0.25rem}.discord-compact-mode .discord-message .discord-author-info{margin-right:0}.discord-message .discord-author-info .discord-author-username{color:#fff;font-size:1em;font-weight:500}.discord-light-theme .discord-message .discord-author-info .discord-author-username{color:#23262a}.discord-message .discord-author-info .discord-application-tag{background-color:#5865f2;color:#fff;font-size:0.625em;margin-left:4px;border-radius:3px;line-height:100%;text-transform:uppercase;display:flex;align-items:center;height:0.9375rem;padding:0 0.275rem;margin-top:0.075em;border-radius:0.1875rem}.discord-message .discord-author-info .discord-application-tag.discord-application-tag-op{background-color:#c9cdfb;color:#4752c4;border-radius:0.4rem}.discord-message .discord-author-info .discord-application-tag-verified{display:inline-block;width:0.9375rem;height:0.9375rem;margin-left:-0.25rem}.discord-message .discord-author-info .discord-author-role-icon{margin-left:0.25rem;vertical-align:top;height:calc(1rem + 4px);width:calc(1rem + 4px)}.discord-compact-mode .discord-message .discord-author-info .discord-author-username{margin-left:8px;margin-right:4px}.discord-compact-mode .discord-message .discord-author-info .discord-application-tag{margin-left:0;margin-left:5px;margin-right:5px;padding-left:10px;padding-right:4px}.discord-compact-mode .discord-message .discord-author-info .discord-application-tag-verified{margin-right:0.7em;margin-left:-0.7em}</style><style sty-id="sc-discord-code-block">.discord-code-block-pre{background-color:#2f3136;font-family:'Consolas', 'Courier New', Courier, monospace;margin-top:0.25rem;white-space:pre-wrap}.discord-code-block-pre--multiline{display:block;margin-bottom:0.5rem;margin-top:0.25em;padding:0.5em;border:1px solid #202225;border-radius:4px;color:#b9bbbe;font-size:0.875rem}.discord-code-block-pre--multiline.hljs{background-color:#2f3136;color:#b9bbbe}.discord-embed .discord-code-block-pre{background-color:#202225}.discord-embed .discord-code-block-pre .hljs{background-color:#202225}code.hljs{padding:unset !important}/*!
  Theme: Helios
  Author: Alex Meyer (https://github.com/reyemxela)
  License: ~ MIT (or more permissive) [via base16-schemes-source]
  Maintainer: @highlightjs/core-team
  Version: 2021.09.0
*/pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#d5d5d5;background:#1d2021}.hljs ::selection,.hljs::selection{background-color:#53585b;color:#d5d5d5}.hljs-comment{color:#6f7579}.hljs-tag{color:#cdcdcd}.hljs-operator,.hljs-punctuation,.hljs-subst{color:#d5d5d5}.hljs-operator{opacity:.7}.hljs-bullet,.hljs-deletion,.hljs-name,.hljs-selector-tag,.hljs-template-variable,.hljs-variable{color:#d72638}.hljs-attr,.hljs-link,.hljs-literal,.hljs-number,.hljs-symbol,.hljs-variable.constant_{color:#eb8413}.hljs-class .hljs-title,.hljs-title,.hljs-title.class_{color:#f19d1a}.hljs-strong{font-weight:700;color:#f19d1a}.hljs-addition,.hljs-code,.hljs-string,.hljs-title.class_.inherited__{color:#88b92d}.hljs-built_in,.hljs-doctag,.hljs-keyword.hljs-atrule,.hljs-quote,.hljs-regexp{color:#1ba595}.hljs-attribute,.hljs-function .hljs-title,.hljs-section,.hljs-title.function_,.ruby .hljs-property{color:#1e8bac}.diff .hljs-meta,.hljs-keyword,.hljs-template-tag,.hljs-type{color:#be4264}.hljs-emphasis{color:#be4264;font-style:italic}.hljs-meta,.hljs-meta .hljs-keyword,.hljs-meta .hljs-string{color:#c85e0d}.hljs-meta .hljs-keyword,.hljs-meta-keyword{font-weight:700}</style><style sty-id="sc-discord-embed">.discord-embed{color:#dcddde;display:flex;font-size:13px;line-height:150%;margin-bottom:2px;margin-top:2px}.discord-light-theme .discord-embed{color:#2e3338}.discord-embed .discord-left-border{background-color:#202225;border-radius:4px 0 0 4px;flex-shrink:0;width:4px}.discord-light-theme .discord-embed .discord-left-border{background-color:#e3e5e8}.discord-embed .discord-embed-root{display:grid;grid-auto-flow:row;grid-row-gap:0.25rem;min-height:0;min-width:0;text-indent:0}.discord-embed .discord-embed-wrapper{background-color:#2f3136;max-width:520px;border:1px solid rgba(46, 48, 54, 0.6);border-radius:0 4px 4px 0;justify-self:start;align-self:start;display:grid;box-sizing:border-box}.discord-light-theme .discord-embed .discord-embed-wrapper{background-color:rgba(249, 249, 249, 0.3);border-color:rgba(205, 205, 205, 0.3)}.discord-embed .discord-embed-wrapper .discord-embed-grid{display:inline-grid;grid-template-columns:auto -webkit-min-content;grid-template-columns:auto min-content;grid-template-columns:auto;grid-template-rows:auto;padding:0.5rem 1rem 1rem 0.75rem}.discord-embed .discord-embed-thumbnail{border-radius:4px;flex-shrink:0;grid-column:2/2;grid-row:1/8;justify-self:end;margin-left:16px;margin-top:8px;max-height:80px;max-width:80px;object-fit:contain;object-position:top center}.discord-embed .discord-embed-author{-webkit-box-align:center;align-items:center;color:#fff;font-size:14px;display:flex;font-weight:600;grid-column:1 / 1;margin-top:8px;min-width:0}.discord-light-theme .discord-embed .discord-embed-author{color:#4f545c}.discord-embed .discord-embed-author a{color:#fff;font-weight:600}.discord-light-theme .discord-embed .discord-embed-author a{color:#4f545c}.discord-embed .discord-embed-author .discord-author-image{border-radius:50%;height:24px;margin-right:8px;width:24px}.discord-embed .discord-embed-provider{font-size:0.75rem;line-height:1rem;font-weight:400;grid-column:1/1;margin-top:8px;unicode-bidi:plaintext;text-align:left}.discord-light-theme .discord-embed .discord-embed-provider{color:#4f545c}.discord-embed .discord-embed-title{-webkit-box-align:center;align-items:center;color:#fff;display:inline-block;font-size:1rem;font-weight:600;grid-column:1 / 1;margin-top:8px;min-width:0}.discord-embed .discord-embed-title a{color:#00aff4;font-weight:600}.discord-embed .discord-embed-image{border-radius:4px;max-width:100%}.discord-embed .discord-embed-media{border-radius:4px;contain:paint;display:block;grid-column:1/1;margin-top:16px}.discord-embed .discord-embed-media.discord-embed-media-video{height:225px}.discord-embed .discord-embed.media .discord-embed-image{overflow:hidden;position:relative;user-select:text}.discord-embed .discord-embed-media .discord-embed-video{-webkit-box-align:center;-webkit-box-pack:center;align-items:center;border-radius:0;cursor:pointer;display:flex;height:100%;justify-content:center;max-height:100%;width:100%;width:400px;height:225px;left:0px;top:0px}.discord-embed-custom-emoji{display:inline-block}.discord-embed-custom-emoji .discord-embed-custom-emoji-image{width:18px;height:18px;vertical-align:bottom}</style><style sty-id="sc-discord-reply">.discord-replied-message{color:#b9bbbe;display:flex;font-size:0.875rem;font-family:Whitney, 'Source Sans Pro', ui-sans-serif, system-ui, -apple-system, 'system-ui', 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
		sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';padding-top:2px;margin-left:56px;margin-bottom:4px;align-items:center;line-height:1.125rem;position:relative;white-space:pre;user-select:none}.discord-light-theme .discord-replied-message{color:#4f5660}.discord-compact-mode .discord-replied-message{margin-left:62px;margin-bottom:0}.discord-replied-message:before{content:'';display:block;position:absolute;top:50%;right:100%;bottom:0;left:-36px;margin-right:4px;margin-top:-1px;margin-left:-1px;margin-bottom:-2px;border-left:2px solid #4f545c;border-bottom:0 solid #4f545c;border-right:0 solid #4f545c;border-top:2px solid #4f545c;border-top-left-radius:6px}.discord-light-theme .discord-replied-message:before{border-color:#747f8d}.discord-replied-message .discord-replied-message-avatar,.discord-replied-message .discord-reply-badge{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:16px;height:16px;border-radius:50%;user-select:none;margin-right:0.25rem}.discord-replied-message .discord-reply-badge{display:flex;align-items:center;justify-content:center;color:#b9bbbe;background:#202225}.discord-light-theme .discord-replied-message .discord-reply-badge{color:#4f5660;background:#e3e5e8}.discord-replied-message .discord-application-tag{background-color:hsl(235, 85.6%, 64.7%);color:#fff;font-size:0.625rem;margin-right:0.25rem;line-height:100%;text-transform:uppercase;display:flex;align-items:center;height:0.9375rem;padding:0 0.275rem;margin-top:0.075em;border-radius:0.1875rem}.discord-replied-message .discord-application-tag .discord-application-tag-verified{width:0.9375rem;height:0.9375rem;margin-left:-0.1rem}.discord-replied-message .discord-application-tag.discord-application-tag-op{background-color:#c9cdfb;color:#4752c4;border-radius:0.4rem}.discord-replied-message .discord-replied-message-username{flex-shrink:0;font-size:inherit;line-height:inherit;margin-right:0.25rem;opacity:0.64;font-weight:500;color:#fff}.discord-replied-message .discord-replied-message-content{color:inherit;font-size:inherit;line-height:inherit;white-space:pre;text-overflow:ellipsis;user-select:none;cursor:pointer;overflow-x:hidden}.discord-replied-message .discord-replied-message-content:hover{color:#fff}.discord-light-theme .discord-replied-message .discord-replied-message-content:hover{color:#000}.discord-replied-message .discord-replied-message-content .discord-message-edited{margin-left:0.25rem}.discord-replied-message .discord-replied-message-content-icon{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:20px;height:20px;margin-left:4px}.discord-message .discord-author-info{display:inline-flex;align-items:center;font-size:16px;margin-right:0.25rem}.discord-compact-mode .discord-message .discord-author-info{margin-right:0}.discord-message .discord-author-info .discord-author-username{color:#fff;font-size:1em;font-weight:500}.discord-light-theme .discord-message .discord-author-info .discord-author-username{color:#23262a}.discord-message .discord-author-info .discord-application-tag{background-color:#5865f2;color:#fff;font-size:0.625em;margin-left:4px;border-radius:3px;line-height:100%;text-transform:uppercase;display:flex;align-items:center;height:0.9375rem;padding:0 0.275rem;margin-top:0.075em;border-radius:0.1875rem}.discord-message .discord-author-info .discord-application-tag.discord-application-tag-op{background-color:#c9cdfb;color:#4752c4;border-radius:0.4rem}.discord-message .discord-author-info .discord-application-tag-verified{display:inline-block;width:0.9375rem;height:0.9375rem;margin-left:-0.25rem}.discord-message .discord-author-info .discord-author-role-icon{margin-left:0.25rem;vertical-align:top;height:calc(1rem + 4px);width:calc(1rem + 4px)}.discord-compact-mode .discord-message .discord-author-info .discord-author-username{margin-left:8px;margin-right:4px}.discord-compact-mode .discord-message .discord-author-info .discord-application-tag{margin-left:0;margin-left:5px;margin-right:5px;padding-left:10px;padding-right:4px}.discord-compact-mode .discord-message .discord-author-info .discord-application-tag-verified{margin-right:0.7em;margin-left:-0.7em}</style><style sty-id="sc-discord-reactions">.discord-message .discord-reactions,.discord-system-message .discord-reactions{display:flex;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;align-items:center;flex-wrap:wrap}</style><style sty-id="sc-discord-attachments">.discord-message .discord-attachments{display:grid;grid-auto-flow:row;grid-row-gap:0.25rem;text-indent:0;min-height:0;min-width:0;padding-top:0.125rem;padding-bottom:0.125rem;position:relative}.discord-message .discord-attachments>*{justify-self:start;-ms-flex-item-align:start;align-self:start}</style><style sty-id="sc-discord-mention">.discord-message .discord-mention{color:#e3e7f8;background-color:hsla(235, 85.6%, 64.7%, 0.3);font-weight:500;padding:0 2px;border-radius:3px;unicode-bidi:-moz-plaintext;unicode-bidi:plaintext;-webkit-transition:background-color 50ms ease-out, color 50ms ease-out;transition:background-color 50ms ease-out, color 50ms ease-out;cursor:pointer}.discord-message .discord-mention:hover{color:#fff;background-color:hsl(235, 85.6%, 64.7%)}.discord-message .discord-mention.discord-channel-mention{padding-left:1.2rem !important;position:relative}.discord-message .discord-mention.discord-voice-mention,.discord-message .discord-mention.discord-locked-mention,.discord-message .discord-mention.discord-thread-mention,.discord-message .discord-mention.discord-forum-mention{padding-left:1.25rem !important;position:relative}.discord-light-theme .discord-message .discord-mention{color:#687dc6;background-color:hsla(235, 85.6%, 64.7%, 0.15)}.discord-light-theme .discord-message .discord-mention:hover{color:#ffffff;background-color:hsl(235, 85.6%, 64.7%)}.discord-message .discord-mention .discord-mention-icon{width:1rem;height:1rem;object-fit:contain;position:absolute;left:0.125rem;top:0.125rem}</style><style sty-id="sc-discord-custom-emoji">.discord-custom-emoji{display:inline-block;cursor:pointer;vertical-align:bottom}.discord-custom-emoji .discord-custom-emoji-image{object-fit:contain;width:1.375rem;height:1.375rem;vertical-align:bottom}.discord-custom-emoji .discord-custom-emoji-image-large{width:2.8em;height:2.8em}.discord-embed-custom-emoji{display:inline-block}.discord-embed-custom-emoji .discord-embed-custom-emoji-image{width:18px;height:18px;vertical-align:bottom}</style><style sty-id="sc-discord-embed-description">.discord-embed .discord-embed-description{font-size:0.875rem;font-weight:400;grid-column:1/1;line-height:1.125rem;margin-top:8px;min-width:0;white-space:pre-line}.discord-embed .discord-embed-description pre{margin:0;margin-top:6px}.discord-embed .discord-embed-description img.emoji{width:22px;height:22px}.discord-embed .discord-embed-description blockquote{position:relative;padding:0 8px 0 12px;margin:0}.discord-embed .discord-embed-description blockquote::before{content:'';display:block;position:absolute;left:0;height:100%;width:4px;border-radius:4px;background-color:#4f545c}.discord-light-theme .discord-embed-description blockquote::before{background-color:#c7ccd1}.discord-embed .discord-embed-description .spoiler{background-color:#202225;color:transparent;cursor:pointer}.discord-light-theme .discord-embed .discord-embed-description .spoiler{background-color:#b9bbbe}.discord-embed .discord-embed-description .spoiler:hover{background-color:rgba(32, 34, 37, 0.8)}.discord-light-theme .discord-embed .discord-embed-description .spoiler:hover{background-color:rgba(185, 187, 190, 0.8)}.discord-embed .discord-embed-description .spoiler:active{color:inherit;background-color:hsla(0, 0%, 100%, 0.1)}.discord-light-theme .discord-embed .discord-embed-description .spoiler:active{background-color:rgba(0, 0, 0, 0.1)}</style><style sty-id="sc-discord-reaction">.discord-reaction{border-radius:0.5rem;cursor:pointer;flex-shrink:0;margin-right:0.25rem;margin-bottom:0.25rem;user-select:none;transition:none 0.1s ease;transition-property:background-color, border-color;background-color:#2f3136;border:1px solid transparent}.discord-light-theme .discord-reaction{background-color:#f2f3f5}.discord-reaction:hover{background-color:#36393f;border-color:#fff2}.discord-light-theme .discord-reaction:not(.discord-reaction-reacted):hover{background-color:white;border-color:#0003}.discord-reaction.discord-reaction-reacted{background-color:rgba(88, 101, 242, 0.15);border-color:#5865f2}.discord-light-theme .discord-reaction.discord-reaction-reacted{background-color:#e7e9fd}.discord-reaction .discord-reaction-inner{display:flex;align-items:center;padding:0.125rem 0.375rem}.discord-reaction img{width:1rem;height:1rem;margin:0.125rem 0;min-width:auto;min-height:auto;object-fit:contain;vertical-align:bottom}.discord-reaction .discord-reaction-count{font-size:0.875rem;font-weight:500;margin-left:0.375rem;text-align:center;color:#b9bbbe}.discord-light-theme .discord-reaction .discord-reaction-count{color:#4f5660}.discord-reaction.discord-reaction-reacted .discord-reaction-count{color:#dee0fc}.discord-light-theme .discord-reaction.discord-reaction-reacted .discord-reaction-count{color:#5865f2}</style><style sty-id="sc-discord-attachment">.discord-attachment{color:#dcddde;display:flex;font-size:13px;line-height:150%;margin-bottom:8px;margin-top:8px}.discord-attachment .discord-image-wrapper{display:block;position:relative;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow:hidden;border-radius:3px}.discord-attachment .discord-image-wrapper img,.discord-attachment .discord-image-wrapper video{max-width:400px;width:100%;height:auto}.discord-attachment-generic{display:flex;width:auto;max-width:520px;height:40px;padding:10px;background-color:#2f3136;border:1px solid #292b2f;border-radius:3px;overflow:hidden}.discord-attachment-generic-icon{float:left;height:100%;width:auto}.discord-attachment-generic-icon>svg{width:30px;height:100%;margin-right:10px}.discord-attachment-generic-inner{flex-grow:1;width:fit-content;height:100%}.discord-attachment-generic-size{color:#72767d;font-size:12px;align-items:flex-start;line-height:100%}.discord-attachment-generic-name{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:fit-content}.discord-attachment-generic-download{float:right;height:100%;margin-left:5px;margin-right:5px}.discord-attachment-generic-download>a>svg{height:100%;color:rgb(185, 187, 190)}.discord-attachment-generic-download>a>svg:hover{color:rgb(220, 221, 222)}</style><link rel="icon" type="image/png" href="https://cdn.discordapp.com/icons/918498540232253480/31a743207f2d3b681494445b982fabcd.png?size=16"><title>Extended Scan Response with BLE</title><script>document.addEventListener("click",t=>{let e=t.target;if(!e)return;let o=e?.getAttribute("data-goto");if(o){let r=document.getElementById(`m-${o}`);r?(r.scrollIntoView({behavior:"smooth",block:"center"}),r.style.backgroundColor="rgba(148, 156, 247, 0.1)",r.style.transition="background-color 0.5s ease",setTimeout(()=>{r.style.backgroundColor="transparent"},1e3)):console.warn("Message ${goto} not found.")}});</script></head><body style="margin: 0; min-height: 100vh;"><discord-messages class="discord-messages hydrated" s-id="1" style="min-height: 100vh;"><!--r.1--><!--o.0.1--><!--o.0.2--><!--o.0.3--><!--o.0.4--><!--o.0.5--><!--o.0.6--><!--o.0.7--><!--o.0.8--><!--o.0.9--><!--o.0.10--><!--o.0.11--><!--o.0.12--><!--o.0.13--><!--o.0.14--><!--o.0.15--><!--o.0.16--><!--o.0.17--><!--o.0.18--><!--o.0.19--><!--o.0.20--><!--o.0.21--><!--o.0.22--><!--o.0.23--><!--o.0.24--><!--o.0.25--><!--o.0.26--><!--o.0.27--><!--o.0.28--><!--o.0.29--><!--o.0.30--><!--o.0.31--><!--o.0.32--><!--o.0.33--><!--o.0.34--><!--o.0.35--><!--o.0.36--><!--o.0.37--><!--o.0.38--><!--o.0.39--><!--o.0.40--><!--o.0.41--><!--o.0.42--><!--o.0.43--><!--o.0.44--><!--o.0.45--><!--o.0.46--><!--o.0.47--><!--o.0.48--><!--o.0.49--><!--o.0.50--><!--o.0.51--><!--o.0.52--><!--o.0.53--><!--o.0.54--><!--o.0.55--><!--s.1.0.0.0.--><discord-header guild="Toit" channel="Extended Scan Response with BLE" icon="https://cdn.discordapp.com/icons/918498540232253480/31a743207f2d3b681494445b982fabcd.webp?size=128" class="discord-header hydrated" s-id="2" c-id="0.1"><!--r.2--><!--o.0.56--><div class="discord-header-icon" c-id="2.0.0.0"><img src="https://cdn.discordapp.com/icons/918498540232253480/31a743207f2d3b681494445b982fabcd.webp?size=128" alt="guild icon" c-id="2.1.1.0"></div><div class="discord-header-text" c-id="2.2.0.1"><div class="discord-header-text-guild" c-id="2.3.1.0"><!--t.2.4.2.0-->Toit</div><div class="discord-header-text-channel" c-id="2.5.1.1"><!--t.2.6.2.0-->#Extended Scan Response with BLE</div><!--s.2.7.1.2.--><!--t.0.56-->Thread channel in help</div></discord-header><discord-message id="m-1307381608537657415" timestamp="11/16/2024 04:27 PM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="3" c-id="0.2"><!--r.3--><!--o.0.57--><!--o.0.58--><!--o.0.59--><!--o.0.60--><!--o.0.61--><!--o.0.62--><!--o.0.63--><!--o.0.64--><!--o.0.65--><!--o.0.66--><!--o.0.67--><!--o.0.68--><!--o.0.69--><!--o.0.70--><!--o.0.71--><!--o.0.72--><!--o.0.73--><!--o.0.74--><!--o.0.75--><!--o.0.76--><!--o.0.77--><!--o.0.78--><!--o.0.79--><!--o.0.80--><!--o.0.81--><!--o.0.82--><!--o.0.83--><!--s.3.0.0.0.reply--><div class="discord-message-inner" c-id="3.1.0.1"><div class="discord-author-avatar" c-id="3.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="3.3.2.0"></div><div class="discord-message-content" c-id="3.4.1.1"><span class="discord-author-info" c-id="3.5.2.0"><span class="discord-author-username" c-id="3.6.3.0"><!--t.3.7.4.0-->Tej</span><!--t.3.8.3.1--> </span><span class="discord-message-timestamp" c-id="3.9.2.1"><!--t.3.10.3.0-->11/16/2024 04:27 PM</span><div class="discord-message-body" c-id="3.11.2.2"><span class="discord-message-markup" c-id="3.12.3.0"><!--s.3.13.4.0.--><discord-inline-code class="hydrated" s-id="4" c-id="0.57"><!--r.4--><!--o.0.84--><code c-id="4.0.0.0"><!--s.4.1.1.0.--><!--t.0.84-->AdvertisementData</code></discord-inline-code><!--t.0.58--> is limited to 31 bytes in <discord-inline-code class="hydrated" s-id="5" c-id="0.59"><!--r.5--><!--o.0.85--><code c-id="5.0.0.0"><!--s.5.1.1.0.--><!--t.0.85-->ble.toit</code></discord-inline-code><!--t.0.60-->. How does one get extended scan responses? I am unable to see the <discord-inline-code class="hydrated" s-id="6" c-id="0.61"><!--r.6--><!--o.0.86--><code c-id="6.0.0.0"><!--s.6.1.1.0.--><!--t.0.86-->name</code></discord-inline-code><!--t.0.62--> or <discord-inline-code class="hydrated" s-id="7" c-id="0.63"><!--r.7--><!--o.0.87--><code c-id="7.0.0.0"><!--s.7.1.1.0.--><!--t.0.87-->manufacturer-data</code></discord-inline-code><!--t.0.64--> of BLE beacons I am scanning. Here's a short code snippet I am using and the result.<br c-id="0.65"><br c-id="0.66"><discord-code-block language="toit" code="import ble
import encoding.hex


BEACON-SERVICE ::= ble.BleUuid &quot;FEAA&quot;
SCAN-DURATION   ::= Duration --s=3

main:
  adapter := ble.Adapter
  central := adapter.central

  while true:
    addresses := Set
    data := []

    central.scan --duration=SCAN-DURATION: | device/ble.RemoteScannedDevice |
      if device.data.service-classes.contains BEACON-SERVICE:
        address := hex.encode device.address
        addresses.add (address.to-ascii-upper.trim --left &quot;00&quot;)
        data.add device.data.manufacturer-data

    print addresses
    print data
    sleep Duration/5" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="8" c-id="0.67"><!--r.8--><code class="hljs language-plaintext" c-id="8.0.0.0">import ble
import encoding.hex


BEACON-SERVICE ::= ble.BleUuid "FEAA"
SCAN-DURATION   ::= Duration --s=3

main:
  adapter := ble.Adapter
  central := adapter.central

  while true:
    addresses := Set
    data := []

    central.scan --duration=SCAN-DURATION: | device/ble.RemoteScannedDevice |
      if device.data.service-classes.contains BEACON-SERVICE:
        address := hex.encode device.address
        addresses.add (address.to-ascii-upper.trim --left "00")
        data.add device.data.manufacturer-data

    print addresses
    print data
    sleep Duration/5</code></discord-code-block><br c-id="0.68"><br c-id="0.69"><!--t.0.70-->Result:<br c-id="0.71"><discord-code-block language="" code="{BC5729059011}
[#[]]" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="9" c-id="0.72"><!--r.9--><code class="hljs language-plaintext" c-id="9.0.0.0">{BC5729059011}
[#[]]</code></discord-code-block><br c-id="0.73"><!--t.0.74-->Env:<br c-id="0.75"><discord-code-block language="bash" code="[tej@a1278 temperature_beacon]$ jag firmware
Device 'eloquent-fortune' is running Toit SDK v2.0.0-alpha.164

Running on ESP32-Wroom-32 (Olimex ESP32 Gateway)" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="10" c-id="0.76"><!--r.10--><code class="hljs language-bash" c-id="10.0.0.0">[tej@a1278 temperature_beacon]$ jag firmware
Device <span class="hljs-string">'eloquent-fortune'</span> is running Toit SDK v2.0.0-alpha.164

Running on ESP32-Wroom-32 (Olimex ESP32 Gateway)</code></discord-code-block><br c-id="0.77"><br c-id="0.78"><!--t.0.79-->What am I missing? I have looked through <discord-inline-code class="hydrated" s-id="11" c-id="0.80"><!--r.11--><!--o.0.88--><code c-id="11.0.0.0"><!--s.11.1.1.0.--><!--t.0.88-->ble.toit</code></discord-inline-code><!--t.0.81--> and <discord-inline-code class="hydrated" s-id="12" c-id="0.82"><!--r.12--><!--o.0.89--><code c-id="12.0.0.0"><!--s.12.1.1.0.--><!--t.0.89-->remote.toit</code></discord-inline-code><!--t.0.83--> and can't see any alternative scan methods nor any flags I can set.</span><!--t.3.14.3.1--> </div><div class="discord-message-compact-indent" c-id="3.15.2.3"><!--s.3.16.3.0.embeds--><!--s.3.17.3.1.attachments--><!--s.3.18.3.2.components--><!--s.3.19.3.3.reactions--><!--s.3.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1307382160654598245" timestamp="11/16/2024 04:29 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="13" c-id="0.3"><!--r.13--><!--o.0.90--><!--o.0.91--><!--o.0.92--><!--s.13.0.0.0.reply--><div class="discord-message-inner" c-id="13.1.0.1"><div class="discord-author-avatar" c-id="13.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="13.3.2.0"></div><div class="discord-message-content" c-id="13.4.1.1"><span class="discord-author-info" c-id="13.5.2.0"><span class="discord-author-username" c-id="13.6.3.0"><!--t.13.7.4.0-->floitsch</span><!--t.13.8.3.1--> </span><span class="discord-message-timestamp" c-id="13.9.2.1"><!--t.13.10.3.0-->11/16/2024 04:29 PM</span><div class="discord-message-body" c-id="13.11.2.2"><span class="discord-message-markup" c-id="13.12.3.0"><!--s.13.13.4.0.--><!--t.0.90-->I'm currently traveling but will take a look next week (Tuesday or later).<br c-id="0.91"><!--t.0.92-->If you have esp-idf code (in C) that does the right thing that would help, as I could compare it to what we do at the moment. (But not a requirement).</span><!--t.13.14.3.1--> </div><div class="discord-message-compact-indent" c-id="13.15.2.3"><!--s.13.16.3.0.embeds--><!--s.13.17.3.1.attachments--><!--s.13.18.3.2.components--><!--s.13.19.3.3.reactions--><!--s.13.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1307398855368638535" timestamp="11/16/2024 05:36 PM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="14" c-id="0.4"><!--r.14--><!--o.0.93--><!--o.0.94--><!--o.0.95--><!--o.0.96--><!--o.0.97--><!--o.0.98--><!--o.0.99--><!--o.0.100--><!--o.0.101--><!--o.0.102--><!--o.0.103--><!--o.0.104--><!--s.14.0.0.0.reply--><div class="discord-message-inner" c-id="14.1.0.1"><div class="discord-author-avatar" c-id="14.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="14.3.2.0"></div><div class="discord-message-content" c-id="14.4.1.1"><span class="discord-author-info" c-id="14.5.2.0"><span class="discord-author-username" c-id="14.6.3.0"><!--t.14.7.4.0-->Tej</span><!--t.14.8.3.1--> </span><span class="discord-message-timestamp" c-id="14.9.2.1"><!--t.14.10.3.0-->11/16/2024 05:36 PM</span><div class="discord-message-body" c-id="14.11.2.2"><span class="discord-message-markup" c-id="14.12.3.0"><!--s.14.13.4.0.--><!--t.0.93-->I think I have found the issue. Nimble does passive scans by default. I also see this in [<discord-inline-code class="hydrated" s-id="15" c-id="0.94"><!--r.15--><!--o.0.105--><code c-id="15.0.0.0"><!--s.15.1.1.0.--><!--t.0.105-->resources/ble_esp32.cc</code></discord-inline-code><!--t.0.95-->](<a href="https://github.com/toitlang/toit/blob/6a2f27006dd25601046c7c996bbc3e159b10842c/src/resources/ble_esp32.cc#L2444" target="_blank" rel="noreferrer" c-id="0.96">https://github.com/toitlang/toit/blob/6a2f27006dd25601046c7c996bbc3e159b10842c/src/resources/ble_esp32.cc#L2444</a><!--t.0.97-->):<br c-id="0.98"><br c-id="0.99"><discord-code-block language="" code="/**
   * Perform a passive scan.  I.e., don't send follow-up scan requests to
   * each advertiser.
   */
  disc_params.passive = 1;" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="16" c-id="0.100"><!--r.16--><code class="hljs language-plaintext" c-id="16.0.0.0">/**
   * Perform a passive scan.  I.e., don't send follow-up scan requests to
   * each advertiser.
   */
  disc_params.passive = 1;</code></discord-code-block><br c-id="0.101"><br c-id="0.102"><!--t.0.103-->I have been using Bluedroid - let me compile a working example in Nimble and share it tomorrow.</span><!--t.14.14.3.1--> </div><div class="discord-message-compact-indent" c-id="14.15.2.3"><!--s.14.16.3.0.embeds--><discord-embed embed-title="toit/src/resources/ble_esp32.cc at 6a2f27006dd25601046c7c996bbc3e15..." slot="embeds" color="#1e2327" thumbnail="https://images-ext-1.discordapp.net/external/FIymthQry1tjKmeI2C1tCvRQFHUzDxO0k5nc9ALP170/https/repository-images.githubusercontent.com/427260190/af05f930-cb7a-40fb-9dcc-bead2e3ce630" url="https://github.com/toitlang/toit/blob/6a2f27006dd25601046c7c996bbc3e159b10842c/src/resources/ble_esp32.cc" class="hydrated" s-id="17" c-id="0.104"><!--r.17--><!--o.0.106--><div class="discord-embed" c-id="17.0.0.0"><div class="discord-left-border" c-id="17.1.1.0" style="background-color: #1e2327;"></div><div class="discord-embed-root" c-id="17.2.1.1"><div class="discord-embed-wrapper" c-id="17.3.2.0"><div class="discord-embed-grid" c-id="17.4.3.0"><div class="discord-embed-title" c-id="17.5.4.0"><a href="https://github.com/toitlang/toit/blob/6a2f27006dd25601046c7c996bbc3e159b10842c/src/resources/ble_esp32.cc" target="_blank" rel="noopener noreferrer" c-id="17.6.5.0"><!--t.17.7.6.0-->toit/src/resources/ble_esp32.cc at 6a2f27006dd25601046c7c996bbc3e15...</a></div><!--s.17.8.4.1.description--><discord-embed-description slot="description" class="discord-embed-description hydrated" s-id="18" c-id="0.106"><!--r.18--><!--o.0.107--><!--s.18.0.0.0.--><!--t.0.107-->Program your microcontrollers in a fast and robust high-level language. - toitlang/toit</discord-embed-description><!--s.17.9.4.2.fields--><img src="https://images-ext-1.discordapp.net/external/FIymthQry1tjKmeI2C1tCvRQFHUzDxO0k5nc9ALP170/https/repository-images.githubusercontent.com/427260190/af05f930-cb7a-40fb-9dcc-bead2e3ce630" alt="" class="discord-embed-thumbnail" c-id="17.10.4.3"><!--s.17.11.4.4.footer--></div></div></div></div></discord-embed><!--s.14.17.3.1.attachments--><!--s.14.18.3.2.components--><!--s.14.19.3.3.reactions--><!--s.14.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1307399464931168327" timestamp="11/16/2024 05:38 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="19" c-id="0.5"><!--r.19--><!--o.0.108--><!--s.19.0.0.0.reply--><div class="discord-message-inner" c-id="19.1.0.1"><div class="discord-author-avatar" c-id="19.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="19.3.2.0"></div><div class="discord-message-content" c-id="19.4.1.1"><span class="discord-author-info" c-id="19.5.2.0"><span class="discord-author-username" c-id="19.6.3.0"><!--t.19.7.4.0-->floitsch</span><!--t.19.8.3.1--> </span><span class="discord-message-timestamp" c-id="19.9.2.1"><!--t.19.10.3.0-->11/16/2024 05:38 PM</span><div class="discord-message-body" c-id="19.11.2.2"><span class="discord-message-markup" c-id="19.12.3.0"><!--s.19.13.4.0.--><!--t.0.108-->Great feedback. Thanks</span><!--t.19.14.3.1--> </div><div class="discord-message-compact-indent" c-id="19.15.2.3"><!--s.19.16.3.0.embeds--><!--s.19.17.3.1.attachments--><!--s.19.18.3.2.components--><!--s.19.19.3.3.reactions--><!--s.19.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1307622187603066921" timestamp="11/17/2024 08:23 AM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="20" c-id="0.6"><!--r.20--><!--o.0.109--><!--o.0.110--><!--o.0.111--><!--o.0.112--><!--o.0.113--><!--o.0.114--><!--s.20.0.0.0.reply--><div class="discord-message-inner" c-id="20.1.0.1"><div class="discord-author-avatar" c-id="20.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="20.3.2.0"></div><div class="discord-message-content" c-id="20.4.1.1"><span class="discord-author-info" c-id="20.5.2.0"><span class="discord-author-username" c-id="20.6.3.0"><!--t.20.7.4.0-->Tej</span><!--t.20.8.3.1--> </span><span class="discord-message-timestamp" c-id="20.9.2.1"><!--t.20.10.3.0-->11/17/2024 08:23 AM</span><div class="discord-message-body" c-id="20.11.2.2"><span class="discord-message-markup" c-id="20.12.3.0"><!--s.20.13.4.0.--><!--t.0.109-->Here's a minimal working example using Nimble with ESP-IDF. As I suspected we are not getting the scan response unless we set <discord-inline-code class="hydrated" s-id="21" c-id="0.110"><!--r.21--><!--o.0.115--><code c-id="21.0.0.0"><!--s.21.1.1.0.--><!--t.0.115-->disc_params.passive = 0</code></discord-inline-code><br c-id="0.111"><br c-id="0.112"><a href="https://github.com/tejpochiraju/nimble_beacon_scanner/blob/main/main/main.c" target="_blank" rel="noreferrer" c-id="0.113">https://github.com/tejpochiraju/nimble_beacon_scanner/blob/main/main/main.c</a></span><!--t.20.14.3.1--> </div><div class="discord-message-compact-indent" c-id="20.15.2.3"><!--s.20.16.3.0.embeds--><discord-embed embed-title="nimble_beacon_scanner/main/main.c at main · tejpochiraju/nimble_bea..." slot="embeds" color="#1e2327" thumbnail="https://images-ext-1.discordapp.net/external/RUAbAyVJoRNJlLAkFM8Yn3wh9QVg-KmS5R8fVgLlF0s/https/opengraph.githubassets.com/790891a46b947dd9290078cb771462f170119f2fb49e349b8204cacfa385194e/tejpochiraju/nimble_beacon_scanner" url="https://github.com/tejpochiraju/nimble_beacon_scanner/blob/main/main/main.c" class="hydrated" s-id="22" c-id="0.114"><!--r.22--><!--o.0.116--><div class="discord-embed" c-id="22.0.0.0"><div class="discord-left-border" c-id="22.1.1.0" style="background-color: #1e2327;"></div><div class="discord-embed-root" c-id="22.2.1.1"><div class="discord-embed-wrapper" c-id="22.3.2.0"><div class="discord-embed-grid" c-id="22.4.3.0"><div class="discord-embed-title" c-id="22.5.4.0"><a href="https://github.com/tejpochiraju/nimble_beacon_scanner/blob/main/main/main.c" target="_blank" rel="noopener noreferrer" c-id="22.6.5.0"><!--t.22.7.6.0-->nimble_beacon_scanner/main/main.c at main · tejpochiraju/nimble_bea...</a></div><!--s.22.8.4.1.description--><discord-embed-description slot="description" class="discord-embed-description hydrated" s-id="23" c-id="0.116"><!--r.23--><!--o.0.117--><!--s.23.0.0.0.--><!--t.0.117-->Contribute to tejpochiraju/nimble_beacon_scanner development by creating an account on GitHub.</discord-embed-description><!--s.22.9.4.2.fields--><img src="https://images-ext-1.discordapp.net/external/RUAbAyVJoRNJlLAkFM8Yn3wh9QVg-KmS5R8fVgLlF0s/https/opengraph.githubassets.com/790891a46b947dd9290078cb771462f170119f2fb49e349b8204cacfa385194e/tejpochiraju/nimble_beacon_scanner" alt="" class="discord-embed-thumbnail" c-id="22.10.4.3"><!--s.22.11.4.4.footer--></div></div></div></div></discord-embed><!--s.20.17.3.1.attachments--><!--s.20.18.3.2.components--><!--s.20.19.3.3.reactions--><!--s.20.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1307634579921961002" timestamp="11/17/2024 09:12 AM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="24" c-id="0.7"><!--r.24--><!--o.0.118--><!--o.0.119--><!--o.0.120--><!--s.24.0.0.0.reply--><div class="discord-message-inner" c-id="24.1.0.1"><div class="discord-author-avatar" c-id="24.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="24.3.2.0"></div><div class="discord-message-content" c-id="24.4.1.1"><span class="discord-author-info" c-id="24.5.2.0"><span class="discord-author-username" c-id="24.6.3.0"><!--t.24.7.4.0-->floitsch</span><!--t.24.8.3.1--> </span><span class="discord-message-timestamp" c-id="24.9.2.1"><!--t.24.10.3.0-->11/17/2024 09:12 AM</span><div class="discord-message-body" c-id="24.11.2.2"><span class="discord-message-markup" c-id="24.12.3.0"><!--s.24.13.4.0.--><!--t.0.118-->Thanks! <br c-id="0.119"><!--t.0.120-->I will probably add a flag to the scan method, or, if I don't find any reason against it, enable active by default.</span><!--t.24.14.3.1--> </div><div class="discord-message-compact-indent" c-id="24.15.2.3"><!--s.24.16.3.0.embeds--><!--s.24.17.3.1.attachments--><!--s.24.18.3.2.components--><!--s.24.19.3.3.reactions--><!--s.24.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1307636406935490581" timestamp="11/17/2024 09:20 AM" edited="false" server="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="25" c-id="0.8"><!--r.25--><!--o.0.121--><!--o.0.122--><!--o.0.123--><!--o.0.124--><!--o.0.125--><!--o.0.126--><!--o.0.127--><!--o.0.128--><!--o.0.129--><!--o.0.130--><!--o.0.131--><!--o.0.132--><!--s.25.0.0.0.reply--><discord-reply slot="reply" edited="false" attachment="false" author="floitsch" avatar="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=32" bot="false" verified="false" op="false" command="false" class="discord-replied-message hydrated" s-id="26" c-id="0.121"><!--r.26--><!--o.0.133--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=32" alt="floitsch" c-id="26.0.0.0"><span class="discord-replied-message-username" c-id="26.1.0.1"><!--t.26.2.1.0-->floitsch</span><div class="discord-replied-message-content" c-id="26.3.0.2"><!--s.26.4.1.0.--><span data-goto="1307634579921961002" c-id="0.133">Thanks!  I will probably add a flag to the scan method, or, if I don't find any reason against it, enable active by default.</span><!--t.26.5.1.1--> </div></discord-reply><div class="discord-message-inner" c-id="25.1.0.1"><div class="discord-author-avatar" c-id="25.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="25.3.2.0"></div><div class="discord-message-content" c-id="25.4.1.1"><span class="discord-author-info" c-id="25.5.2.0"><span class="discord-author-username" c-id="25.6.3.0"><!--t.25.7.4.0-->Tej</span><!--t.25.8.3.1--> </span><span class="discord-message-timestamp" c-id="25.9.2.1"><!--t.25.10.3.0-->11/17/2024 09:20 AM</span><div class="discord-message-body" c-id="25.11.2.2"><span class="discord-message-markup" c-id="25.12.3.0"><!--s.25.13.4.0.--><!--t.0.122-->I would recommend keeping <discord-inline-code class="hydrated" s-id="27" c-id="0.123"><!--r.27--><!--o.0.134--><code c-id="27.0.0.0"><!--s.27.1.1.0.--><!--t.0.134-->passive</code></discord-inline-code><!--t.0.124--> as the default and exposing a flag instead - consumes less energy in <discord-inline-code class="hydrated" s-id="28" c-id="0.125"><!--r.28--><!--o.0.135--><code c-id="28.0.0.0"><!--s.28.1.1.0.--><!--t.0.135-->passive</code></discord-inline-code><!--t.0.126-->.  And keeps the defaults consistent with upstream Nimble configuration. <br c-id="0.127"><br c-id="0.128"><!--t.0.129-->I was trying to do just that locally and build a custom envelope but am currently running into network issues while running <discord-inline-code class="hydrated" s-id="29" c-id="0.130"><!--r.29--><!--o.0.136--><code c-id="29.0.0.0"><!--s.29.1.1.0.--><!--t.0.136-->git submodule init</code></discord-inline-code><!--t.0.131--> - will try again later.</span><!--t.25.14.3.1--> </div><div class="discord-message-compact-indent" c-id="25.15.2.3"><!--s.25.16.3.0.embeds--><!--s.25.17.3.1.attachments--><!--s.25.18.3.2.components--><!--s.25.19.3.3.reactions--><discord-reactions slot="reactions" class="discord-reactions hydrated" s-id="30" c-id="0.132"><!--r.30--><!--o.0.137--><!--s.30.0.0.0.--><discord-reaction name="👍" emoji="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f44d.svg" count="1" class="hydrated" s-id="31" c-id="0.137"><!--r.31--><div class="discord-reaction" c-id="31.0.0.0"><div class="discord-reaction-inner" c-id="31.1.1.0"><img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f44d.svg" alt="👍" draggable="false" c-id="31.2.2.0"><span class="discord-reaction-count" c-id="31.3.2.1"><!--t.31.4.3.0-->1</span></div></div></discord-reaction></discord-reactions><!--s.25.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1307637599271260181" timestamp="11/17/2024 09:24 AM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="32" c-id="0.9"><!--r.32--><!--o.0.138--><!--o.0.139--><!--o.0.140--><!--o.0.141--><!--s.32.0.0.0.reply--><div class="discord-message-inner" c-id="32.1.0.1"><div class="discord-author-avatar" c-id="32.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="32.3.2.0"></div><div class="discord-message-content" c-id="32.4.1.1"><span class="discord-author-info" c-id="32.5.2.0"><span class="discord-author-username" c-id="32.6.3.0"><!--t.32.7.4.0-->floitsch</span><!--t.32.8.3.1--> </span><span class="discord-message-timestamp" c-id="32.9.2.1"><!--t.32.10.3.0-->11/17/2024 09:24 AM</span><div class="discord-message-body" c-id="32.11.2.2"><span class="discord-message-markup" c-id="32.12.3.0"><!--s.32.13.4.0.--><!--t.0.138-->When building locally (or even on GitHub builders) set the <discord-inline-code class="hydrated" s-id="33" c-id="0.139"><!--r.33--><!--o.0.142--><code c-id="33.0.0.0"><!--s.33.1.1.0.--><!--t.0.142-->TOIT_GIT_VERSION</code></discord-inline-code><!--t.0.140--> to the version Jaguar/Artemis use. Otherwise the tooling will complain that the versions don't match. (Normally that's not completely safe, but I don't remember any recent breaking changes that would make the bytecodes incompatible)</span><!--t.32.14.3.1--> </div><div class="discord-message-compact-indent" c-id="32.15.2.3"><!--s.32.16.3.0.embeds--><!--s.32.17.3.1.attachments--><!--s.32.18.3.2.components--><!--s.32.19.3.3.reactions--><discord-reactions slot="reactions" class="discord-reactions hydrated" s-id="34" c-id="0.141"><!--r.34--><!--o.0.143--><!--s.34.0.0.0.--><discord-reaction name="👍" emoji="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f44d.svg" count="1" class="hydrated" s-id="35" c-id="0.143"><!--r.35--><div class="discord-reaction" c-id="35.0.0.0"><div class="discord-reaction-inner" c-id="35.1.1.0"><img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f44d.svg" alt="👍" draggable="false" c-id="35.2.2.0"><span class="discord-reaction-count" c-id="35.3.2.1"><!--t.35.4.3.0-->1</span></div></div></discord-reaction></discord-reactions><!--s.32.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308139647557308536" timestamp="11/18/2024 06:39 PM" edited="true" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="36" c-id="0.10"><!--r.36--><!--o.0.144--><!--o.0.145--><!--o.0.146--><!--o.0.147--><!--o.0.148--><!--o.0.149--><!--o.0.150--><!--o.0.151--><!--o.0.152--><!--o.0.153--><!--o.0.154--><!--o.0.155--><!--o.0.156--><!--o.0.157--><!--o.0.158--><!--o.0.159--><!--o.0.160--><!--o.0.162--><!--o.0.163--><!--o.0.164--><!--o.0.165--><!--o.0.166--><!--o.0.167--><!--o.0.168--><!--o.0.169--><!--o.0.170--><!--o.0.171--><!--o.0.172--><!--o.0.173--><!--s.36.0.0.0.reply--><div class="discord-message-inner" c-id="36.1.0.1"><div class="discord-author-avatar" c-id="36.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="36.3.2.0"></div><div class="discord-message-content" c-id="36.4.1.1"><span class="discord-author-info" c-id="36.5.2.0"><span class="discord-author-username" c-id="36.6.3.0"><!--t.36.7.4.0-->Tej</span><!--t.36.8.3.1--> </span><span class="discord-message-timestamp" c-id="36.9.2.1"><!--t.36.10.3.0-->11/18/2024 06:39 PM</span><div class="discord-message-body" c-id="36.11.2.2"><span class="discord-message-markup" c-id="36.12.3.0"><!--s.36.13.4.0.--><!--t.0.144-->I am not getting <discord-inline-code class="hydrated" s-id="37" c-id="0.145"><!--r.37--><!--o.0.174--><code c-id="37.0.0.0"><!--s.37.1.1.0.--><!--t.0.174-->name</code></discord-inline-code><!--t.0.146--> or advertisement data on the Toit side of things even after changing <discord-inline-code class="hydrated" s-id="38" c-id="0.147"><!--r.38--><!--o.0.175--><code c-id="38.0.0.0"><!--s.38.1.1.0.--><!--t.0.175-->disc_params.passive = 0;</code></discord-inline-code><!--t.0.148--> in <discord-inline-code class="hydrated" s-id="39" c-id="0.149"><!--r.39--><!--o.0.176--><code c-id="39.0.0.0"><!--s.39.1.1.0.--><!--t.0.176-->src/resources/ble_esp32.cc</code></discord-inline-code><!--t.0.150-->.  I verified that the modified ble_esp32.cc is being compiled by adding a few <discord-inline-code class="hydrated" s-id="40" c-id="0.151"><!--r.40--><!--o.0.177--><code c-id="40.0.0.0"><!--s.40.1.1.0.--><!--t.0.177-->ESP_LOGE</code></discord-inline-code><!--t.0.152--> statements. Specifically, I changed the <discord-inline-code class="hydrated" s-id="41" c-id="0.153"><!--r.41--><!--o.0.178--><code c-id="41.0.0.0"><!--s.41.1.1.0.--><!--t.0.178-->BleCentralManagerResource::_on_discovery</code></discord-inline-code><!--t.0.154--> function to print the raw event data (see attached file and output below).  To be clear, <discord-inline-code class="hydrated" s-id="42" c-id="0.155"><!--r.42--><!--o.0.179--><code c-id="42.0.0.0"><!--s.42.1.1.0.--><!--t.0.179-->disc_params.passive = 0;</code></discord-inline-code><!--t.0.156--> is working but the extra data is not being used.<br c-id="0.157"><br c-id="0.158"><!--t.0.159-->I can see that the data is received in this function but is not being passed further? Also, not sure how to handle the raw advertisement data on the Toit side of things - this is <discord-italic class="hydrated" s-id="43" c-id="0.160"><!--r.43--><!--o.0.180--><em c-id="43.0.0.0"><!--s.43.1.1.0.--><!--t.0.180-->not</em></discord-italic> <discord-inline-code class="hydrated" s-id="44" c-id="0.162"><!--r.44--><!--o.0.181--><code c-id="44.0.0.0"><!--s.44.1.1.0.--><!--t.0.181-->manufacturer-data</code></discord-inline-code><!--t.0.163--> but raw bytes instead.<br c-id="0.164"><br c-id="0.165"><br c-id="0.166"><discord-code-block language="bash" code="E (7363) BLE: Discovery Event:
E (7363) BLE:   Address: 11:90:05:29:57:bc
E (7363) BLE:   RSSI: -61
E (7363) BLE:   Event Type: 0
E (7363) BLE:   Data Length: 29
E (7363) BLE:   Advertisement Data:
  02 01 06 03 03 aa fe 15 16 aa fe 21 04 0f 0b d4
  18 f8 43 0c 00 d6 ff f0 03 c4 01 1a 2e
E (7373) BLE: Discovery Event:
E (7383) BLE:   Address: 11:90:05:29:57:bc
E (7383) BLE:   RSSI: -62
E (7383) BLE:   Event Type: 4
E (7393) BLE:   Data Length: 24
E (7393) BLE:   Advertisement Data:
  09 16 80 20 66 09 00 00 00 00 0d 09 42 4c 45 30
  30 30 30 30 30 30 31 31" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="45" c-id="0.167"><!--r.45--><code class="hljs language-bash" c-id="45.0.0.0">E (7363) BLE: Discovery Event:
E (7363) BLE:   Address: 11:90:05:29:57:bc
E (7363) BLE:   RSSI: -61
E (7363) BLE:   Event Type: 0
E (7363) BLE:   Data Length: 29
E (7363) BLE:   Advertisement Data:
  02 01 06 03 03 aa fe 15 16 aa fe 21 04 0f 0b d4
  18 f8 43 0c 00 d6 ff f0 03 c4 01 1a 2e
E (7373) BLE: Discovery Event:
E (7383) BLE:   Address: 11:90:05:29:57:bc
E (7383) BLE:   RSSI: -62
E (7383) BLE:   Event Type: 4
E (7393) BLE:   Data Length: 24
E (7393) BLE:   Advertisement Data:
  09 16 80 20 66 09 00 00 00 00 0d 09 42 4c 45 30
  30 30 30 30 30 30 31 31</code></discord-code-block><br c-id="0.168"><br c-id="0.169"><!--t.0.170-->Steps:<br c-id="0.171"><discord-code-block language="" code="TOIT_GIT_VERSION=v2.0.0-alpha.164 make esp32
# beacon.toit is the example code from the first post
toit compile --snapshot -o beacon.snapshot beacon.toit
toit tool firmware -e build/esp32/firmware.envelope container install beacon beacon.snapshot
toit tool firmware -e build/esp32/firmware.envelope flash --port /dev/ttyUSB0 --baud 921600
jag monitor" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="46" c-id="0.172"><!--r.46--><code class="hljs language-plaintext" c-id="46.0.0.0">TOIT_GIT_VERSION=v2.0.0-alpha.164 make esp32
# beacon.toit is the example code from the first post
toit compile --snapshot -o beacon.snapshot beacon.toit
toit tool firmware -e build/esp32/firmware.envelope container install beacon beacon.snapshot
toit tool firmware -e build/esp32/firmware.envelope flash --port /dev/ttyUSB0 --baud 921600
jag monitor</code></discord-code-block></span><span class="discord-message-edited" c-id="36.14.3.1"><!--t.36.15.4.0-->(edited)</span></div><div class="discord-message-compact-indent" c-id="36.16.2.3"><!--s.36.17.3.0.embeds--><!--s.36.18.3.1.attachments--><discord-attachments slot="attachments" class="discord-attachments hydrated" s-id="47" c-id="0.173"><!--r.47--><!--o.0.182--><discord-attachment type="file" size="118.65 KB" slot="attachment" url="https://cdn.discordapp.com/attachments/1307381608537657415/1308139646815047790/ble_esp32.cc?ex=67c6a03b&amp;is=67c54ebb&amp;hm=3ff9226c00e28e12da1220e23aafdb0e3256b5162c33c4a33b77b1ddabd99ac0&amp;" alt="ble_esp32.cc" hidden="" class="discord-attachment-generic hydrated" s-id="48" c-id="0.182"><!--r.48--><div class="discord-attachment-generic-icon" c-id="48.0.0.0"><svg xmlns="http://www.w3.org/2000/svg" fill="none" height="96" viewBox="0 0 72 96" width="72" c-id="48.1.1.0"><path d="m72 29.3v60.3c0 2.24 0 3.36-.44 4.22-.38.74-1 1.36-1.74 1.74-.86.44-1.98.44-4.22.44h-59.2c-2.24 0-3.36 0-4.22-.44-.74-.38-1.36-1-1.74-1.74-.44-.86-.44-1.98-.44-4.22v-83.2c0-2.24 0-3.36.44-4.22.38-.74 1-1.36 1.74-1.74.86-.44 1.98-.44 4.22-.44h36.3c1.96 0 2.94 0 3.86.22.5.12.98.28 1.44.5v16.88c0 2.24 0 3.36.44 4.22.38.74 1 1.36 1.74 1.74.86.44 1.98.44 4.22.44h16.88c.22.46.38.94.5 1.44.22.92.22 1.9.22 3.86z" fill="#d3d6fd" c-id="48.2.2.0"></path><path d="m68.26 20.26c1.38 1.38 2.06 2.06 2.56 2.88.18.28.32.56.46.86h-16.88c-2.24 0-3.36 0-4.22-.44-.74-.38-1.36-1-1.74-1.74-.44-.86-.44-1.98-.44-4.22v-16.880029c.3.14.58.28.86.459999.82.5 1.5 1.18 2.88 2.56z" fill="#939bf9" c-id="48.3.2.1"></path></svg></div><div class="discord-attachment-generic-inner" c-id="48.4.0.1"><div class="discord-attachment-generic-name" c-id="48.5.1.0"><a href="https://cdn.discordapp.com/attachments/1307381608537657415/1308139646815047790/ble_esp32.cc?ex=67c6a03b&amp;is=67c54ebb&amp;hm=3ff9226c00e28e12da1220e23aafdb0e3256b5162c33c4a33b77b1ddabd99ac0&amp;" target="_blank" rel="noopener noreferrer" c-id="48.6.2.0"><!--t.48.7.3.0-->ble_esp32.cc</a></div><div class="discord-attachment-generic-size" c-id="48.8.1.1"><!--t.48.9.2.0-->118.65 KB</div></div><div class="discord-attachment-generic-download" c-id="48.10.0.2"><a href="https://cdn.discordapp.com/attachments/1307381608537657415/1308139646815047790/ble_esp32.cc?ex=67c6a03b&amp;is=67c54ebb&amp;hm=3ff9226c00e28e12da1220e23aafdb0e3256b5162c33c4a33b77b1ddabd99ac0&amp;" download="" c-id="48.11.1.0"><svg aria-hidden="true" role="img" width="24" height="24" viewBox="0 0 24 24" c-id="48.12.2.0"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M16.293 9.293L17.707 10.707L12 16.414L6.29297 10.707L7.70697 9.293L11 12.586V2H13V12.586L16.293 9.293ZM18 20V18H20V20C20 21.102 19.104 22 18 22H6C4.896 22 4 21.102 4 20V18H6V20H18Z" c-id="48.13.3.0"></path></svg></a></div></discord-attachment><!--s.47.0.0.0.--></discord-attachments><!--s.36.19.3.2.components--><!--s.36.20.3.3.reactions--><!--s.36.21.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308149083378155541" timestamp="11/18/2024 07:17 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="49" c-id="0.11"><!--r.49--><!--o.0.183--><!--s.49.0.0.0.reply--><div class="discord-message-inner" c-id="49.1.0.1"><div class="discord-author-avatar" c-id="49.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="49.3.2.0"></div><div class="discord-message-content" c-id="49.4.1.1"><span class="discord-author-info" c-id="49.5.2.0"><span class="discord-author-username" c-id="49.6.3.0"><!--t.49.7.4.0-->floitsch</span><!--t.49.8.3.1--> </span><span class="discord-message-timestamp" c-id="49.9.2.1"><!--t.49.10.3.0-->11/18/2024 07:17 PM</span><div class="discord-message-body" c-id="49.11.2.2"><span class="discord-message-markup" c-id="49.12.3.0"><!--s.49.13.4.0.--><!--t.0.183-->I will try to repro tomorrow. Thanks</span><!--t.49.14.3.1--> </div><div class="discord-message-compact-indent" c-id="49.15.2.3"><!--s.49.16.3.0.embeds--><!--s.49.17.3.1.attachments--><!--s.49.18.3.2.components--><!--s.49.19.3.3.reactions--><!--s.49.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308367269696376903" timestamp="11/19/2024 09:44 AM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="50" c-id="0.12"><!--r.50--><!--o.0.184--><!--o.0.185--><!--o.0.186--><!--o.0.187--><!--o.0.188--><!--o.0.189--><!--o.0.190--><!--o.0.191--><!--o.0.192--><!--o.0.193--><!--o.0.194--><!--o.0.195--><!--o.0.196--><!--o.0.197--><!--o.0.198--><!--o.0.199--><!--o.0.200--><!--o.0.201--><!--o.0.202--><!--o.0.203--><!--o.0.204--><!--o.0.205--><!--o.0.206--><!--o.0.207--><!--s.50.0.0.0.reply--><div class="discord-message-inner" c-id="50.1.0.1"><div class="discord-author-avatar" c-id="50.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="50.3.2.0"></div><div class="discord-message-content" c-id="50.4.1.1"><span class="discord-author-info" c-id="50.5.2.0"><span class="discord-author-username" c-id="50.6.3.0"><!--t.50.7.4.0-->floitsch</span><!--t.50.8.3.1--> </span><span class="discord-message-timestamp" c-id="50.9.2.1"><!--t.50.10.3.0-->11/19/2024 09:44 AM</span><div class="discord-message-body" c-id="50.11.2.2"><span class="discord-message-markup" c-id="50.12.3.0"><!--s.50.13.4.0.--><!--t.0.184-->Started to look into this. I have a meeting in a few minutes, but here is my current status:<br c-id="0.185"><!--t.0.186-->- I was easily able to run your modified code. Thanks!<br c-id="0.187"><!--t.0.188-->- the Event Type for active scans seems to be 4.<br c-id="0.189"><!--t.0.190-->- the received data (that has the debug prints) is stored in a <discord-inline-code class="hydrated" s-id="51" c-id="0.191"><!--r.51--><!--o.0.208--><code c-id="51.0.0.0"><!--s.51.1.1.0.--><!--t.0.208-->DiscoveredPeripheral</code></discord-inline-code><!--t.0.192--> object and then put into a queue.<br c-id="0.193"><!--t.0.194-->- the <discord-inline-code class="hydrated" s-id="52" c-id="0.195"><!--r.52--><!--o.0.209--><code c-id="52.0.0.0"><!--s.52.1.1.0.--><!--t.0.209-->scan_next</code></discord-inline-code><!--t.0.196--> function (2480) then takes the next entry and passes it on to the Toit code.<br c-id="0.197"><!--t.0.198-->- there is a <discord-inline-code class="hydrated" s-id="53" c-id="0.199"><!--r.53--><!--o.0.210--><code c-id="53.0.0.0"><!--s.53.1.1.0.--><!--t.0.210-->ble_hs_adv_parse_fields</code></discord-inline-code><!--t.0.200--> (ble_esp32.cc:2502) that decomposes the received data into what is usually expected from advertisement packets.<br c-id="0.201"><br c-id="0.202"><!--t.0.203-->If I understand you correctly, we shouldn't call <discord-inline-code class="hydrated" s-id="54" c-id="0.204"><!--r.54--><!--o.0.211--><code c-id="54.0.0.0"><!--s.54.1.1.0.--><!--t.0.211-->ble_hs_adv_parse_fields</code></discord-inline-code><!--t.0.205--> for active-scan responses but pass the data directly to the Toit code. If that's the case I just need to store the event-type in the <discord-inline-code class="hydrated" s-id="55" c-id="0.206"><!--r.55--><!--o.0.212--><code c-id="55.0.0.0"><!--s.55.1.1.0.--><!--t.0.212-->DiscoveredPerihperal</code></discord-inline-code><!--t.0.207--> object and then simply avoid the parsing-call.</span><!--t.50.14.3.1--> </div><div class="discord-message-compact-indent" c-id="50.15.2.3"><!--s.50.16.3.0.embeds--><!--s.50.17.3.1.attachments--><!--s.50.18.3.2.components--><!--s.50.19.3.3.reactions--><!--s.50.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308370348441604097" timestamp="11/19/2024 09:56 AM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="56" c-id="0.13"><!--r.56--><!--o.0.213--><!--s.56.0.0.0.reply--><div class="discord-message-inner" c-id="56.1.0.1"><div class="discord-author-avatar" c-id="56.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="56.3.2.0"></div><div class="discord-message-content" c-id="56.4.1.1"><span class="discord-author-info" c-id="56.5.2.0"><span class="discord-author-username" c-id="56.6.3.0"><!--t.56.7.4.0-->Tej</span><!--t.56.8.3.1--> </span><span class="discord-message-timestamp" c-id="56.9.2.1"><!--t.56.10.3.0-->11/19/2024 09:56 AM</span><div class="discord-message-body" c-id="56.11.2.2"><span class="discord-message-markup" c-id="56.12.3.0"><!--s.56.13.4.0.--><!--t.0.213-->Let me dig a bit more into ble_hs_adv_parse_fields before I comment on the behaviour. I am afraid I haven't had to dig into the details previously so I am also figuring out the "correct" behaviour.</span><!--t.56.14.3.1--> </div><div class="discord-message-compact-indent" c-id="56.15.2.3"><!--s.56.16.3.0.embeds--><!--s.56.17.3.1.attachments--><!--s.56.18.3.2.components--><!--s.56.19.3.3.reactions--><!--s.56.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308370928085766154" timestamp="11/19/2024 09:58 AM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="57" c-id="0.14"><!--r.57--><!--o.0.214--><!--s.57.0.0.0.reply--><div class="discord-message-inner" c-id="57.1.0.1"><div class="discord-author-avatar" c-id="57.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="57.3.2.0"></div><div class="discord-message-content" c-id="57.4.1.1"><span class="discord-author-info" c-id="57.5.2.0"><span class="discord-author-username" c-id="57.6.3.0"><!--t.57.7.4.0-->floitsch</span><!--t.57.8.3.1--> </span><span class="discord-message-timestamp" c-id="57.9.2.1"><!--t.57.10.3.0-->11/19/2024 09:58 AM</span><div class="discord-message-body" c-id="57.11.2.2"><span class="discord-message-markup" c-id="57.12.3.0"><!--s.57.13.4.0.--><!--t.0.214-->Looking too.</span><!--t.57.14.3.1--> </div><div class="discord-message-compact-indent" c-id="57.15.2.3"><!--s.57.16.3.0.embeds--><!--s.57.17.3.1.attachments--><!--s.57.18.3.2.components--><!--s.57.19.3.3.reactions--><!--s.57.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308400263383744533" timestamp="11/19/2024 11:55 AM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="58" c-id="0.15"><!--r.58--><!--o.0.215--><!--o.0.216--><!--o.0.217--><!--o.0.218--><!--o.0.219--><!--o.0.220--><!--o.0.221--><!--o.0.222--><!--o.0.223--><!--o.0.224--><!--o.0.225--><!--o.0.226--><!--o.0.227--><!--o.0.228--><!--o.0.229--><!--o.0.230--><!--o.0.231--><!--o.0.232--><!--s.58.0.0.0.reply--><div class="discord-message-inner" c-id="58.1.0.1"><div class="discord-author-avatar" c-id="58.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="58.3.2.0"></div><div class="discord-message-content" c-id="58.4.1.1"><span class="discord-author-info" c-id="58.5.2.0"><span class="discord-author-username" c-id="58.6.3.0"><!--t.58.7.4.0-->floitsch</span><!--t.58.8.3.1--> </span><span class="discord-message-timestamp" c-id="58.9.2.1"><!--t.58.10.3.0-->11/19/2024 11:55 AM</span><div class="discord-message-body" c-id="58.11.2.2"><span class="discord-message-markup" c-id="58.12.3.0"><!--s.58.13.4.0.--><!--t.0.215-->After some reading, I'm pretty sure that the scan response packet follows the same structure as the advertisement packet.<br c-id="0.216"><!--t.0.217-->In your example, there is a <discord-inline-code class="hydrated" s-id="59" c-id="0.218"><!--r.59--><!--o.0.233--><code c-id="59.0.0.0"><!--s.59.1.1.0.--><!--t.0.233-->09 16 80 20 66 09 00 00 00 00</code></discord-inline-code><!--t.0.219--> which seems to be a service data - 16-bit UUID. It seems like the 16-bit UUID is 0x2080 and the data is <discord-inline-code class="hydrated" s-id="60" c-id="0.220"><!--r.60--><!--o.0.234--><code c-id="60.0.0.0"><!--s.60.1.1.0.--><!--t.0.234-->66 09 00 00 00 00</code></discord-inline-code><!--t.0.221-->.<br c-id="0.222"><!--t.0.223-->After that, the <discord-inline-code class="hydrated" s-id="61" c-id="0.224"><!--r.61--><!--o.0.235--><code c-id="61.0.0.0"><!--s.61.1.1.0.--><!--t.0.235-->0d 09 42 4c 45 30 30 30 30 30 30 30 31 31</code></discord-inline-code><!--t.0.225--> decodes as name <discord-inline-code class="hydrated" s-id="62" c-id="0.226"><!--r.62--><!--o.0.236--><code c-id="62.0.0.0"><!--s.62.1.1.0.--><!--t.0.236-->BLE000000011</code></discord-inline-code><!--t.0.227-->.<br c-id="0.228"><!--t.0.229-->It looks like we don't copy these fields to the Toit side yet.<br c-id="0.230"><br c-id="0.231"><!--t.0.232-->If the macos-side allows it I will probably just move the decoding of the frame into Toit code. That would give access to the raw data, and also make it easier to implement the missing fields.</span><!--t.58.14.3.1--> </div><div class="discord-message-compact-indent" c-id="58.15.2.3"><!--s.58.16.3.0.embeds--><!--s.58.17.3.1.attachments--><!--s.58.18.3.2.components--><!--s.58.19.3.3.reactions--><!--s.58.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308422065371615252" timestamp="11/19/2024 01:22 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="63" c-id="0.16"><!--r.63--><!--o.0.237--><!--o.0.238--><!--o.0.239--><!--o.0.240--><!--o.0.241--><!--o.0.242--><!--s.63.0.0.0.reply--><div class="discord-message-inner" c-id="63.1.0.1"><div class="discord-author-avatar" c-id="63.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="63.3.2.0"></div><div class="discord-message-content" c-id="63.4.1.1"><span class="discord-author-info" c-id="63.5.2.0"><span class="discord-author-username" c-id="63.6.3.0"><!--t.63.7.4.0-->floitsch</span><!--t.63.8.3.1--> </span><span class="discord-message-timestamp" c-id="63.9.2.1"><!--t.63.10.3.0-->11/19/2024 01:22 PM</span><div class="discord-message-body" c-id="63.11.2.2"><span class="discord-message-markup" c-id="63.12.3.0"><!--s.63.13.4.0.--><discord-mention type="user" class="discord-mention discord-user-mention hydrated" s-id="64" c-id="0.237"><!--r.64--><!--o.0.243--><!--t.64.0.0.0-->@<!--s.64.1.0.1.--><!--t.0.243-->Tej</discord-mention><!--t.0.238--> you changed the interval and the window.<br c-id="0.239"><!--t.0.240-->Do you have some information on whether that's something that should be by default?<br c-id="0.241"><!--t.0.242-->Should we expose it to the Toit level?</span><!--t.63.14.3.1--> </div><div class="discord-message-compact-indent" c-id="63.15.2.3"><!--s.63.16.3.0.embeds--><!--s.63.17.3.1.attachments--><!--s.63.18.3.2.components--><!--s.63.19.3.3.reactions--><!--s.63.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308491076671242360" timestamp="11/19/2024 05:56 PM" edited="false" server="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="65" c-id="0.17"><!--r.65--><!--o.0.244--><!--o.0.245--><!--o.0.246--><!--o.0.247--><!--o.0.248--><!--s.65.0.0.0.reply--><discord-reply slot="reply" edited="false" attachment="false" author="floitsch" avatar="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=32" bot="false" verified="false" op="false" command="false" class="discord-replied-message hydrated" s-id="66" c-id="0.244"><!--r.66--><!--o.0.249--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=32" alt="floitsch" c-id="66.0.0.0"><span class="discord-replied-message-username" c-id="66.1.0.1"><!--t.66.2.1.0-->floitsch</span><div class="discord-replied-message-content" c-id="66.3.0.2"><!--s.66.4.1.0.--><span data-goto="1308422065371615252" c-id="0.249"><discord-mention type="user" class="discord-mention discord-user-mention hydrated" s-id="67"><!--r.67--><!--o.0.250--><!--t.67.0.0.0-->@<!--s.67.1.0.1.--><!--t.0.250-->Tej</discord-mention> you changed the interval and the window. Do you have some information on whether that's something that should be by default? Should we expose it to the Toit ...</span><!--t.66.5.1.1--> </div></discord-reply><div class="discord-message-inner" c-id="65.1.0.1"><div class="discord-author-avatar" c-id="65.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="65.3.2.0"></div><div class="discord-message-content" c-id="65.4.1.1"><span class="discord-author-info" c-id="65.5.2.0"><span class="discord-author-username" c-id="65.6.3.0"><!--t.65.7.4.0-->Tej</span><!--t.65.8.3.1--> </span><span class="discord-message-timestamp" c-id="65.9.2.1"><!--t.65.10.3.0-->11/19/2024 05:56 PM</span><div class="discord-message-body" c-id="65.11.2.2"><span class="discord-message-markup" c-id="65.12.3.0"><!--s.65.13.4.0.--><!--t.0.245-->I did a literal translation of the parameters from our current code base to Nimble. I just checked with interval and window = 0 (default) and there's no difference in the result. I doubt we need those and I suspect these are left over from some old experimentation. <br c-id="0.246"><br c-id="0.247"><!--t.0.248-->In terms of exposing it, maybe make these optional with defaults as 0? Where does Toit sit on simplicity vs power?</span><!--t.65.14.3.1--> </div><div class="discord-message-compact-indent" c-id="65.15.2.3"><!--s.65.16.3.0.embeds--><!--s.65.17.3.1.attachments--><!--s.65.18.3.2.components--><!--s.65.19.3.3.reactions--><!--s.65.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308491484856848394" timestamp="11/19/2024 05:58 PM" edited="false" server="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="68" c-id="0.18"><!--r.68--><!--o.0.251--><!--o.0.252--><!--s.68.0.0.0.reply--><discord-reply slot="reply" edited="false" attachment="false" author="Tej" avatar="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" bot="false" verified="false" op="true" server="false" command="false" class="discord-replied-message hydrated" s-id="69" c-id="0.251"><!--r.69--><!--o.0.253--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" alt="Tej" c-id="69.0.0.0"><span class="discord-application-tag discord-application-tag-op" c-id="69.1.0.1"><!--t.69.2.1.0-->OP</span><span class="discord-replied-message-username" c-id="69.3.0.2"><!--t.69.4.1.0-->Tej</span><div class="discord-replied-message-content" c-id="69.5.0.3"><!--s.69.6.1.0.--><span data-goto="1308491076671242360" c-id="0.253">I did a literal translation of the parameters from our current code base to Nimble. I just checked with interval and window = 0 (default) and there's no difference in the result. I...</span><!--t.69.7.1.1--> </div></discord-reply><div class="discord-message-inner" c-id="68.1.0.1"><div class="discord-author-avatar" c-id="68.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="68.3.2.0"></div><div class="discord-message-content" c-id="68.4.1.1"><span class="discord-author-info" c-id="68.5.2.0"><span class="discord-author-username" c-id="68.6.3.0"><!--t.68.7.4.0-->floitsch</span><!--t.68.8.3.1--> </span><span class="discord-message-timestamp" c-id="68.9.2.1"><!--t.68.10.3.0-->11/19/2024 05:58 PM</span><div class="discord-message-body" c-id="68.11.2.2"><span class="discord-message-markup" c-id="68.12.3.0"><!--s.68.13.4.0.--><!--t.0.252-->Exposing it with defaults sounds good.</span><!--t.68.14.3.1--> </div><div class="discord-message-compact-indent" c-id="68.15.2.3"><!--s.68.16.3.0.embeds--><!--s.68.17.3.1.attachments--><!--s.68.18.3.2.components--><!--s.68.19.3.3.reactions--><!--s.68.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308491590133747823" timestamp="11/19/2024 05:58 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="70" c-id="0.19"><!--r.70--><!--o.0.254--><!--s.70.0.0.0.reply--><div class="discord-message-inner" c-id="70.1.0.1"><div class="discord-author-avatar" c-id="70.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="70.3.2.0"></div><div class="discord-message-content" c-id="70.4.1.1"><span class="discord-author-info" c-id="70.5.2.0"><span class="discord-author-username" c-id="70.6.3.0"><!--t.70.7.4.0-->floitsch</span><!--t.70.8.3.1--> </span><span class="discord-message-timestamp" c-id="70.9.2.1"><!--t.70.10.3.0-->11/19/2024 05:58 PM</span><div class="discord-message-body" c-id="70.11.2.2"><span class="discord-message-markup" c-id="70.12.3.0"><!--s.70.13.4.0.--><!--t.0.254-->We are not opposed to expose complicated things as long as it starts simple.</span><!--t.70.14.3.1--> </div><div class="discord-message-compact-indent" c-id="70.15.2.3"><!--s.70.16.3.0.embeds--><!--s.70.17.3.1.attachments--><!--s.70.18.3.2.components--><!--s.70.19.3.3.reactions--><!--s.70.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308491609737793647" timestamp="11/19/2024 05:58 PM" edited="false" server="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="71" c-id="0.20"><!--r.71--><!--o.0.255--><!--o.0.256--><!--s.71.0.0.0.reply--><discord-reply slot="reply" edited="false" attachment="false" author="floitsch" avatar="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=32" bot="false" verified="false" op="false" command="false" class="discord-replied-message hydrated" s-id="72" c-id="0.255"><!--r.72--><!--o.0.257--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=32" alt="floitsch" c-id="72.0.0.0"><span class="discord-replied-message-username" c-id="72.1.0.1"><!--t.72.2.1.0-->floitsch</span><div class="discord-replied-message-content" c-id="72.3.0.2"><!--s.72.4.1.0.--><span data-goto="1308400263383744533" c-id="0.257">After some reading, I'm pretty sure that the scan response packet follows the same structure as the advertisement packet. In your example, there is a `09 16 80 20 66 09 00 00 00 00...</span><!--t.72.5.1.1--> </div></discord-reply><div class="discord-message-inner" c-id="71.1.0.1"><div class="discord-author-avatar" c-id="71.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="71.3.2.0"></div><div class="discord-message-content" c-id="71.4.1.1"><span class="discord-author-info" c-id="71.5.2.0"><span class="discord-author-username" c-id="71.6.3.0"><!--t.71.7.4.0-->Tej</span><!--t.71.8.3.1--> </span><span class="discord-message-timestamp" c-id="71.9.2.1"><!--t.71.10.3.0-->11/19/2024 05:58 PM</span><div class="discord-message-body" c-id="71.11.2.2"><span class="discord-message-markup" c-id="71.12.3.0"><!--s.71.13.4.0.--><!--t.0.256-->I am not clear on what you mean by moving the decoding of the frame into Toit code? Would a developer have access to the raw bytes? Reason I ask is, there's an increasing number of BLE sensors and I am not sure all of them allow standard decoding.</span><!--t.71.14.3.1--> </div><div class="discord-message-compact-indent" c-id="71.15.2.3"><!--s.71.16.3.0.embeds--><!--s.71.17.3.1.attachments--><!--s.71.18.3.2.components--><!--s.71.19.3.3.reactions--><!--s.71.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308492025674465300" timestamp="11/19/2024 06:00 PM" edited="false" server="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="73" c-id="0.21"><!--r.73--><!--o.0.258--><!--o.0.259--><!--s.73.0.0.0.reply--><discord-reply slot="reply" edited="false" attachment="false" author="Tej" avatar="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" bot="false" verified="false" op="true" server="false" command="false" class="discord-replied-message hydrated" s-id="74" c-id="0.258"><!--r.74--><!--o.0.260--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" alt="Tej" c-id="74.0.0.0"><span class="discord-application-tag discord-application-tag-op" c-id="74.1.0.1"><!--t.74.2.1.0-->OP</span><span class="discord-replied-message-username" c-id="74.3.0.2"><!--t.74.4.1.0-->Tej</span><div class="discord-replied-message-content" c-id="74.5.0.3"><!--s.74.6.1.0.--><span data-goto="1308491609737793647" c-id="0.260">I am not clear on what you mean by moving the decoding of the frame into Toit code? Would a developer have access to the raw bytes? Reason I ask is, there's an increasing number of...</span><!--t.74.7.1.1--> </div></discord-reply><div class="discord-message-inner" c-id="73.1.0.1"><div class="discord-author-avatar" c-id="73.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="73.3.2.0"></div><div class="discord-message-content" c-id="73.4.1.1"><span class="discord-author-info" c-id="73.5.2.0"><span class="discord-author-username" c-id="73.6.3.0"><!--t.73.7.4.0-->floitsch</span><!--t.73.8.3.1--> </span><span class="discord-message-timestamp" c-id="73.9.2.1"><!--t.73.10.3.0-->11/19/2024 06:00 PM</span><div class="discord-message-body" c-id="73.11.2.2"><span class="discord-message-markup" c-id="73.12.3.0"><!--s.73.13.4.0.--><!--t.0.259-->Yes. I have started to refactor the code so that the packet data (31 bytes) is given to the Toit code (the BLE library). I can now implement the decoding there.</span><!--t.73.14.3.1--> </div><div class="discord-message-compact-indent" c-id="73.15.2.3"><!--s.73.16.3.0.embeds--><!--s.73.17.3.1.attachments--><!--s.73.18.3.2.components--><!--s.73.19.3.3.reactions--><!--s.73.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308492180490551328" timestamp="11/19/2024 06:00 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="75" c-id="0.22"><!--r.75--><!--o.0.261--><!--s.75.0.0.0.reply--><div class="discord-message-inner" c-id="75.1.0.1"><div class="discord-author-avatar" c-id="75.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="75.3.2.0"></div><div class="discord-message-content" c-id="75.4.1.1"><span class="discord-author-info" c-id="75.5.2.0"><span class="discord-author-username" c-id="75.6.3.0"><!--t.75.7.4.0-->floitsch</span><!--t.75.8.3.1--> </span><span class="discord-message-timestamp" c-id="75.9.2.1"><!--t.75.10.3.0-->11/19/2024 06:00 PM</span><div class="discord-message-body" c-id="75.11.2.2"><span class="discord-message-markup" c-id="75.12.3.0"><!--s.75.13.4.0.--><!--t.0.261-->And I would expose the raw data. Most users wouldn't need it, but it shouldn't hurt.</span><!--t.75.14.3.1--> </div><div class="discord-message-compact-indent" c-id="75.15.2.3"><!--s.75.16.3.0.embeds--><!--s.75.17.3.1.attachments--><!--s.75.18.3.2.components--><!--s.75.19.3.3.reactions--><!--s.75.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308492444177924136" timestamp="11/19/2024 06:01 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="76" c-id="0.23"><!--r.76--><!--o.0.262--><!--s.76.0.0.0.reply--><div class="discord-message-inner" c-id="76.1.0.1"><div class="discord-author-avatar" c-id="76.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="76.3.2.0"></div><div class="discord-message-content" c-id="76.4.1.1"><span class="discord-author-info" c-id="76.5.2.0"><span class="discord-author-username" c-id="76.6.3.0"><!--t.76.7.4.0-->floitsch</span><!--t.76.8.3.1--> </span><span class="discord-message-timestamp" c-id="76.9.2.1"><!--t.76.10.3.0-->11/19/2024 06:01 PM</span><div class="discord-message-body" c-id="76.11.2.2"><span class="discord-message-markup" c-id="76.12.3.0"><!--s.76.13.4.0.--><!--t.0.262-->That said. I'm actually splitting it up into fields right now. So basically a partial decoding.</span><!--t.76.14.3.1--> </div><div class="discord-message-compact-indent" c-id="76.15.2.3"><!--s.76.16.3.0.embeds--><!--s.76.17.3.1.attachments--><!--s.76.18.3.2.components--><!--s.76.19.3.3.reactions--><!--s.76.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308492490923311234" timestamp="11/19/2024 06:02 PM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="77" c-id="0.24"><!--r.77--><!--o.0.263--><!--o.0.264--><!--o.0.265--><!--o.0.266--><!--o.0.267--><!--o.0.268--><!--o.0.269--><!--s.77.0.0.0.reply--><div class="discord-message-inner" c-id="77.1.0.1"><div class="discord-author-avatar" c-id="77.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="77.3.2.0"></div><div class="discord-message-content" c-id="77.4.1.1"><span class="discord-author-info" c-id="77.5.2.0"><span class="discord-author-username" c-id="77.6.3.0"><!--t.77.7.4.0-->Tej</span><!--t.77.8.3.1--> </span><span class="discord-message-timestamp" c-id="77.9.2.1"><!--t.77.10.3.0-->11/19/2024 06:02 PM</span><div class="discord-message-body" c-id="77.11.2.2"><span class="discord-message-markup" c-id="77.12.3.0"><!--s.77.13.4.0.--><!--t.0.263-->Not sure this is directly useful here but here's an Aruba document that details how they handle BLE advertisement. <br c-id="0.264"><br c-id="0.265"><a href="https://www.arubanetworks.com/techdocs/Instant_87_WebHelp/Content/instant-ug/custom-iap-param/ble-iot.htm" target="_blank" rel="noreferrer" c-id="0.266">https://www.arubanetworks.com/techdocs/Instant_87_WebHelp/Content/instant-ug/custom-iap-param/ble-iot.htm</a><br c-id="0.267"><br c-id="0.268"><!--t.0.269-->I get why they added support for "known" beacons (business partnerships) but that's a losing battle as the number of beacons increases daily. We find their raw frames more useful.</span><!--t.77.14.3.1--> </div><div class="discord-message-compact-indent" c-id="77.15.2.3"><!--s.77.16.3.0.embeds--><!--s.77.17.3.1.attachments--><!--s.77.18.3.2.components--><!--s.77.19.3.3.reactions--><!--s.77.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308492908248174642" timestamp="11/19/2024 06:03 PM" edited="false" server="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="78" c-id="0.25"><!--r.78--><!--o.0.270--><!--o.0.271--><!--s.78.0.0.0.reply--><discord-reply slot="reply" edited="false" attachment="false" author="Tej" avatar="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" bot="false" verified="false" op="true" command="false" class="discord-replied-message hydrated" s-id="79" c-id="0.270"><!--r.79--><!--o.0.272--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" alt="Tej" c-id="79.0.0.0"><span class="discord-application-tag discord-application-tag-op" c-id="79.1.0.1"><!--t.79.2.1.0-->OP</span><span class="discord-replied-message-username" c-id="79.3.0.2"><!--t.79.4.1.0-->Tej</span><div class="discord-replied-message-content" c-id="79.5.0.3"><!--s.79.6.1.0.--><span data-goto="1308492490923311234" c-id="0.272">Not sure this is directly useful here but here's an Aruba document that details how they handle BLE advertisement. <a href="https://www.arubanetworks.com/techdocs/Instant_87_WebHelp/Conte" target="_blank" rel="noreferrer">https://www.arubanetworks.com/techdocs/Instant_87_WebHelp/Conte</a>...</span><!--t.79.7.1.1--> </div></discord-reply><div class="discord-message-inner" c-id="78.1.0.1"><div class="discord-author-avatar" c-id="78.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="78.3.2.0"></div><div class="discord-message-content" c-id="78.4.1.1"><span class="discord-author-info" c-id="78.5.2.0"><span class="discord-author-username" c-id="78.6.3.0"><!--t.78.7.4.0-->floitsch</span><!--t.78.8.3.1--> </span><span class="discord-message-timestamp" c-id="78.9.2.1"><!--t.78.10.3.0-->11/19/2024 06:03 PM</span><div class="discord-message-body" c-id="78.11.2.2"><span class="discord-message-markup" c-id="78.12.3.0"><!--s.78.13.4.0.--><!--t.0.271-->The content of a ble advertising packed it well defined. So we could decode it in C and send the decoded data to Toit. I find it just more cumbersome</span><!--t.78.14.3.1--> </div><div class="discord-message-compact-indent" c-id="78.15.2.3"><!--s.78.16.3.0.embeds--><!--s.78.17.3.1.attachments--><!--s.78.18.3.2.components--><!--s.78.19.3.3.reactions--><!--s.78.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308492914078257214" timestamp="11/19/2024 06:03 PM" edited="false" server="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="80" c-id="0.26"><!--r.80--><!--o.0.273--><!--o.0.274--><!--s.80.0.0.0.reply--><discord-reply slot="reply" edited="false" attachment="false" author="floitsch" avatar="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=32" bot="false" verified="false" op="false" command="false" class="discord-replied-message hydrated" s-id="81" c-id="0.273"><!--r.81--><!--o.0.275--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=32" alt="floitsch" c-id="81.0.0.0"><span class="discord-replied-message-username" c-id="81.1.0.1"><!--t.81.2.1.0-->floitsch</span><div class="discord-replied-message-content" c-id="81.3.0.2"><!--s.81.4.1.0.--><span data-goto="1308492444177924136" c-id="0.275">That said. I'm actually splitting it up into fields right now. So basically a partial decoding.</span><!--t.81.5.1.1--> </div></discord-reply><div class="discord-message-inner" c-id="80.1.0.1"><div class="discord-author-avatar" c-id="80.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="80.3.2.0"></div><div class="discord-message-content" c-id="80.4.1.1"><span class="discord-author-info" c-id="80.5.2.0"><span class="discord-author-username" c-id="80.6.3.0"><!--t.80.7.4.0-->Tej</span><!--t.80.8.3.1--> </span><span class="discord-message-timestamp" c-id="80.9.2.1"><!--t.80.10.3.0-->11/19/2024 06:03 PM</span><div class="discord-message-body" c-id="80.11.2.2"><span class="discord-message-markup" c-id="80.12.3.0"><!--s.80.13.4.0.--><!--t.0.274-->This is the bit I am unclear on the boundary between standard and common practice. Were you able to find a standard on the fields?</span><!--t.80.14.3.1--> </div><div class="discord-message-compact-indent" c-id="80.15.2.3"><!--s.80.16.3.0.embeds--><!--s.80.17.3.1.attachments--><!--s.80.18.3.2.components--><!--s.80.19.3.3.reactions--><!--s.80.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308492957468332144" timestamp="11/19/2024 06:03 PM" edited="false" server="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="82" c-id="0.27"><!--r.82--><!--o.0.276--><!--o.0.277--><!--s.82.0.0.0.reply--><discord-reply slot="reply" edited="false" attachment="false" author="Tej" avatar="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" bot="false" verified="false" op="true" server="false" command="false" class="discord-replied-message hydrated" s-id="83" c-id="0.276"><!--r.83--><!--o.0.278--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" alt="Tej" c-id="83.0.0.0"><span class="discord-application-tag discord-application-tag-op" c-id="83.1.0.1"><!--t.83.2.1.0-->OP</span><span class="discord-replied-message-username" c-id="83.3.0.2"><!--t.83.4.1.0-->Tej</span><div class="discord-replied-message-content" c-id="83.5.0.3"><!--s.83.6.1.0.--><span data-goto="1308492914078257214" c-id="0.278">This is the bit I am unclear on the boundary between standard and common practice. Were you able to find a standard on the fields?</span><!--t.83.7.1.1--> </div></discord-reply><div class="discord-message-inner" c-id="82.1.0.1"><div class="discord-author-avatar" c-id="82.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="82.3.2.0"></div><div class="discord-message-content" c-id="82.4.1.1"><span class="discord-author-info" c-id="82.5.2.0"><span class="discord-author-username" c-id="82.6.3.0"><!--t.82.7.4.0-->floitsch</span><!--t.82.8.3.1--> </span><span class="discord-message-timestamp" c-id="82.9.2.1"><!--t.82.10.3.0-->11/19/2024 06:03 PM</span><div class="discord-message-body" c-id="82.11.2.2"><span class="discord-message-markup" c-id="82.12.3.0"><!--s.82.13.4.0.--><!--t.0.277-->Yes</span><!--t.82.14.3.1--> </div><div class="discord-message-compact-indent" c-id="82.15.2.3"><!--s.82.16.3.0.embeds--><!--s.82.17.3.1.attachments--><!--s.82.18.3.2.components--><!--s.82.19.3.3.reactions--><!--s.82.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308493023319162925" timestamp="11/19/2024 06:04 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="84" c-id="0.28"><!--r.84--><!--o.0.279--><!--s.84.0.0.0.reply--><div class="discord-message-inner" c-id="84.1.0.1"><div class="discord-author-avatar" c-id="84.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="84.3.2.0"></div><div class="discord-message-content" c-id="84.4.1.1"><span class="discord-author-info" c-id="84.5.2.0"><span class="discord-author-username" c-id="84.6.3.0"><!--t.84.7.4.0-->floitsch</span><!--t.84.8.3.1--> </span><span class="discord-message-timestamp" c-id="84.9.2.1"><!--t.84.10.3.0-->11/19/2024 06:04 PM</span><div class="discord-message-body" c-id="84.11.2.2"><span class="discord-message-markup" c-id="84.12.3.0"><!--s.84.13.4.0.--><!--t.0.279-->In the Bluetooth spec</span><!--t.84.14.3.1--> </div><div class="discord-message-compact-indent" c-id="84.15.2.3"><!--s.84.16.3.0.embeds--><!--s.84.17.3.1.attachments--><!--s.84.18.3.2.components--><!--s.84.19.3.3.reactions--><!--s.84.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308494167441408082" timestamp="11/19/2024 06:08 PM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="85" c-id="0.29"><!--r.85--><!--o.0.280--><!--s.85.0.0.0.reply--><div class="discord-message-inner" c-id="85.1.0.1"><div class="discord-author-avatar" c-id="85.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="85.3.2.0"></div><div class="discord-message-content" c-id="85.4.1.1"><span class="discord-author-info" c-id="85.5.2.0"><span class="discord-author-username" c-id="85.6.3.0"><!--t.85.7.4.0-->Tej</span><!--t.85.8.3.1--> </span><span class="discord-message-timestamp" c-id="85.9.2.1"><!--t.85.10.3.0-->11/19/2024 06:08 PM</span><div class="discord-message-body" c-id="85.11.2.2"><span class="discord-message-markup" c-id="85.12.3.0"><!--s.85.13.4.0.--><!--t.0.280-->Cool. I had assumed the payloads from a couple of our vendors were not standards compliant but reading up, looks like they are.</span><!--t.85.14.3.1--> </div><div class="discord-message-compact-indent" c-id="85.15.2.3"><!--s.85.16.3.0.embeds--><!--s.85.17.3.1.attachments--><!--s.85.18.3.2.components--><!--s.85.19.3.3.reactions--><!--s.85.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308815064576426155" timestamp="11/20/2024 03:23 PM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="86" c-id="0.30"><!--r.86--><!--o.0.281--><!--s.86.0.0.0.reply--><div class="discord-message-inner" c-id="86.1.0.1"><div class="discord-author-avatar" c-id="86.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="86.3.2.0"></div><div class="discord-message-content" c-id="86.4.1.1"><span class="discord-author-info" c-id="86.5.2.0"><span class="discord-author-username" c-id="86.6.3.0"><!--t.86.7.4.0-->Tej</span><!--t.86.8.3.1--> </span><span class="discord-message-timestamp" c-id="86.9.2.1"><!--t.86.10.3.0-->11/20/2024 03:23 PM</span><div class="discord-message-body" c-id="86.11.2.2"><span class="discord-message-markup" c-id="86.12.3.0"><!--s.86.13.4.0.--><!--t.0.281-->I have been a bit tied up so haven't had a chance to dig further. Hoping for some time tomorrow.</span><!--t.86.14.3.1--> </div><div class="discord-message-compact-indent" c-id="86.15.2.3"><!--s.86.16.3.0.embeds--><!--s.86.17.3.1.attachments--><!--s.86.18.3.2.components--><!--s.86.19.3.3.reactions--><!--s.86.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1308815387647021139" timestamp="11/20/2024 03:25 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="87" c-id="0.31"><!--r.87--><!--o.0.282--><!--s.87.0.0.0.reply--><div class="discord-message-inner" c-id="87.1.0.1"><div class="discord-author-avatar" c-id="87.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="87.3.2.0"></div><div class="discord-message-content" c-id="87.4.1.1"><span class="discord-author-info" c-id="87.5.2.0"><span class="discord-author-username" c-id="87.6.3.0"><!--t.87.7.4.0-->floitsch</span><!--t.87.8.3.1--> </span><span class="discord-message-timestamp" c-id="87.9.2.1"><!--t.87.10.3.0-->11/20/2024 03:25 PM</span><div class="discord-message-body" c-id="87.11.2.2"><span class="discord-message-markup" c-id="87.12.3.0"><!--s.87.13.4.0.--><!--t.0.282-->No need. I'm busy refactoring that code. I'm confident it will solve the case you showed earlier.</span><!--t.87.14.3.1--> </div><div class="discord-message-compact-indent" c-id="87.15.2.3"><!--s.87.16.3.0.embeds--><!--s.87.17.3.1.attachments--><!--s.87.18.3.2.components--><!--s.87.19.3.3.reactions--><!--s.87.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1309752290726514718" timestamp="11/23/2024 05:28 AM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="88" c-id="0.32"><!--r.88--><!--o.0.283--><!--o.0.284--><!--o.0.285--><!--s.88.0.0.0.reply--><div class="discord-message-inner" c-id="88.1.0.1"><div class="discord-author-avatar" c-id="88.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="88.3.2.0"></div><div class="discord-message-content" c-id="88.4.1.1"><span class="discord-author-info" c-id="88.5.2.0"><span class="discord-author-username" c-id="88.6.3.0"><!--t.88.7.4.0-->Tej</span><!--t.88.8.3.1--> </span><span class="discord-message-timestamp" c-id="88.9.2.1"><!--t.88.10.3.0-->11/23/2024 05:28 AM</span><div class="discord-message-body" c-id="88.11.2.2"><span class="discord-message-markup" c-id="88.12.3.0"><!--s.88.13.4.0.--><!--t.0.283-->Hi <discord-mention type="user" class="discord-mention discord-user-mention hydrated" s-id="89" c-id="0.284"><!--r.89--><!--o.0.286--><!--t.89.0.0.0-->@<!--s.89.1.0.1.--><!--t.0.286-->floitsch</discord-mention><!--t.0.285--> - I have time this weekend so happy to support with this as you need.</span><!--t.88.14.3.1--> </div><div class="discord-message-compact-indent" c-id="88.15.2.3"><!--s.88.16.3.0.embeds--><!--s.88.17.3.1.attachments--><!--s.88.18.3.2.components--><!--s.88.19.3.3.reactions--><!--s.88.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1309761836194988093" timestamp="11/23/2024 06:05 AM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="90" c-id="0.33"><!--r.90--><!--o.0.287--><!--s.90.0.0.0.reply--><div class="discord-message-inner" c-id="90.1.0.1"><div class="discord-author-avatar" c-id="90.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="90.3.2.0"></div><div class="discord-message-content" c-id="90.4.1.1"><span class="discord-author-info" c-id="90.5.2.0"><span class="discord-author-username" c-id="90.6.3.0"><!--t.90.7.4.0-->floitsch</span><!--t.90.8.3.1--> </span><span class="discord-message-timestamp" c-id="90.9.2.1"><!--t.90.10.3.0-->11/23/2024 06:05 AM</span><div class="discord-message-body" c-id="90.11.2.2"><span class="discord-message-markup" c-id="90.12.3.0"><!--s.90.13.4.0.--><!--t.0.287-->Thanks for the offer. I'm making good progress and I think I will have some PRs ready on Monday. Just writing the tests took much longer than I anticipated.</span><!--t.90.14.3.1--> </div><div class="discord-message-compact-indent" c-id="90.15.2.3"><!--s.90.16.3.0.embeds--><!--s.90.17.3.1.attachments--><!--s.90.18.3.2.components--><!--s.90.19.3.3.reactions--><!--s.90.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1309778153866002523" timestamp="11/23/2024 07:10 AM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="91" c-id="0.34"><!--r.91--><!--o.0.288--><!--o.0.289--><!--s.91.0.0.0.reply--><div class="discord-message-inner" c-id="91.1.0.1"><div class="discord-author-avatar" c-id="91.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="91.3.2.0"></div><div class="discord-message-content" c-id="91.4.1.1"><span class="discord-author-info" c-id="91.5.2.0"><span class="discord-author-username" c-id="91.6.3.0"><!--t.91.7.4.0-->Tej</span><!--t.91.8.3.1--> </span><span class="discord-message-timestamp" c-id="91.9.2.1"><!--t.91.10.3.0-->11/23/2024 07:10 AM</span><div class="discord-message-body" c-id="91.11.2.2"><span class="discord-message-markup" c-id="91.12.3.0"><!--s.91.13.4.0.--><!--t.0.288-->No worries, I have handed off the primary code migration tasks to one of our engineers so my hands are bit freer to tackle general/common needs like BLE, WiFi (AP-STA switchover) and OTA. By the end of the year, I expect we would have moved 3 if not 4 of our products to Toit. That's 3 years of C compressed into 1.5 months of Toit!</span><!--t.91.14.3.1--> </div><div class="discord-message-compact-indent" c-id="91.15.2.3"><!--s.91.16.3.0.embeds--><!--s.91.17.3.1.attachments--><!--s.91.18.3.2.components--><!--s.91.19.3.3.reactions--><discord-reactions slot="reactions" class="discord-reactions hydrated" s-id="92" c-id="0.289"><!--r.92--><!--o.0.290--><!--s.92.0.0.0.--><discord-reaction name="🎉" emoji="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f389.svg" count="2" class="hydrated" s-id="93" c-id="0.290"><!--r.93--><div class="discord-reaction" c-id="93.0.0.0"><div class="discord-reaction-inner" c-id="93.1.1.0"><img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f389.svg" alt="🎉" draggable="false" c-id="93.2.2.0"><span class="discord-reaction-count" c-id="93.3.2.1"><!--t.93.4.3.0-->2</span></div></div></discord-reaction></discord-reactions><!--s.91.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1310311798595125323" timestamp="11/24/2024 06:31 PM" edited="false" server="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="94" c-id="0.35"><!--r.94--><!--o.0.291--><!--o.0.292--><!--o.0.293--><!--o.0.294--><!--o.0.295--><!--o.0.296--><!--o.0.297--><!--o.0.298--><!--o.0.299--><!--o.0.300--><!--o.0.301--><!--o.0.302--><!--o.0.303--><!--o.0.304--><!--s.94.0.0.0.reply--><discord-reply slot="reply" edited="false" attachment="false" author="Tej" avatar="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" bot="false" verified="false" op="true" command="false" class="discord-replied-message hydrated" s-id="95" c-id="0.291"><!--r.95--><!--o.0.305--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" alt="Tej" c-id="95.0.0.0"><span class="discord-application-tag discord-application-tag-op" c-id="95.1.0.1"><!--t.95.2.1.0-->OP</span><span class="discord-replied-message-username" c-id="95.3.0.2"><!--t.95.4.1.0-->Tej</span><div class="discord-replied-message-content" c-id="95.5.0.3"><!--s.95.6.1.0.--><span data-goto="1309752290726514718" c-id="0.305">Hi <discord-mention type="user" class="discord-mention discord-user-mention hydrated" s-id="96"><!--r.96--><!--o.0.306--><!--t.96.0.0.0-->@<!--s.96.1.0.1.--><!--t.0.306-->floitsch</discord-mention> - I have time this weekend so happy to support with this as you need.</span><!--t.95.7.1.1--> </div></discord-reply><div class="discord-message-inner" c-id="94.1.0.1"><div class="discord-author-avatar" c-id="94.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="94.3.2.0"></div><div class="discord-message-content" c-id="94.4.1.1"><span class="discord-author-info" c-id="94.5.2.0"><span class="discord-author-username" c-id="94.6.3.0"><!--t.94.7.4.0-->floitsch</span><!--t.94.8.3.1--> </span><span class="discord-message-timestamp" c-id="94.9.2.1"><!--t.94.10.3.0-->11/24/2024 06:31 PM</span><div class="discord-message-body" c-id="94.11.2.2"><span class="discord-message-markup" c-id="94.12.3.0"><!--s.94.13.4.0.--><!--t.0.292-->FYI: PRs have been uploaded:<br c-id="0.293"><a href="https://github.com/toitlang/toit/pull/2641" target="_blank" rel="noreferrer" c-id="0.294">https://github.com/toitlang/toit/pull/2641</a><br c-id="0.295"><a href="https://github.com/toitlang/toit/pull/2642" target="_blank" rel="noreferrer" c-id="0.296">https://github.com/toitlang/toit/pull/2642</a><br c-id="0.297"><a href="https://github.com/toitlang/toit/pull/2643" target="_blank" rel="noreferrer" c-id="0.298">https://github.com/toitlang/toit/pull/2643</a><br c-id="0.299"><a href="https://github.com/toitlang/toit/pull/2644" target="_blank" rel="noreferrer" c-id="0.300">https://github.com/toitlang/toit/pull/2644</a></span><!--t.94.14.3.1--> </div><div class="discord-message-compact-indent" c-id="94.15.2.3"><!--s.94.16.3.0.embeds--><discord-embed embed-title="Improve BLE advertisements. by floitsch · Pull Request #2641 · toit..." slot="embeds" color="#1e2327" thumbnail="https://images-ext-1.discordapp.net/external/phOQEvBYXAVgLa0iLADBjJ3mZJLia4Y16fPdETh3phM/https/opengraph.githubassets.com/db09813e7e065f63a633682e9d9a10a688905c74dfd54ea5ed17de3d88379a9f/toitlang/toit/pull/2641" url="https://github.com/toitlang/toit/pull/2641" class="hydrated" s-id="97" c-id="0.301"><!--r.97--><!--o.0.307--><div class="discord-embed" c-id="97.0.0.0"><div class="discord-left-border" c-id="97.1.1.0" style="background-color: #1e2327;"></div><div class="discord-embed-root" c-id="97.2.1.1"><div class="discord-embed-wrapper" c-id="97.3.2.0"><div class="discord-embed-grid" c-id="97.4.3.0"><div class="discord-embed-title" c-id="97.5.4.0"><a href="https://github.com/toitlang/toit/pull/2641" target="_blank" rel="noopener noreferrer" c-id="97.6.5.0"><!--t.97.7.6.0-->Improve BLE advertisements. by floitsch · Pull Request #2641 · toit...</a></div><!--s.97.8.4.1.description--><discord-embed-description slot="description" class="discord-embed-description hydrated" s-id="98" c-id="0.307"><!--r.98--><!--o.0.308--><!--o.0.309--><!--o.0.310--><!--o.0.311--><!--o.0.312--><!--o.0.313--><!--s.98.0.0.0.--><!--t.0.308-->Split out the fields and make them accessible.<br c-id="0.309"><!--t.0.310-->This makes it possible to move more code into Toit, and also gives more control to users that need more advanced advertisement fields.<br c-id="0.311"><br c-id="0.312"><!--t.0.313-->Summary by Cod...</discord-embed-description><!--s.97.9.4.2.fields--><img src="https://images-ext-1.discordapp.net/external/phOQEvBYXAVgLa0iLADBjJ3mZJLia4Y16fPdETh3phM/https/opengraph.githubassets.com/db09813e7e065f63a633682e9d9a10a688905c74dfd54ea5ed17de3d88379a9f/toitlang/toit/pull/2641" alt="" class="discord-embed-thumbnail" c-id="97.10.4.3"><!--s.97.11.4.4.footer--></div></div></div></div></discord-embed><discord-embed embed-title="Support active BLE scans. by floitsch · Pull Request #2642 · toitla..." slot="embeds" color="#1e2327" thumbnail="https://images-ext-1.discordapp.net/external/LDntd_KVmb8gOdQfd5tmzLcZiEVn-nK_j1NxwA06jEs/https/opengraph.githubassets.com/5b329dfa456a63db1fa68d9df005d390b7197646d5483a2fad635e943f7af2f5/toitlang/toit/pull/2642" url="https://github.com/toitlang/toit/pull/2642" class="hydrated" s-id="99" c-id="0.302"><!--r.99--><!--o.0.314--><div class="discord-embed" c-id="99.0.0.0"><div class="discord-left-border" c-id="99.1.1.0" style="background-color: #1e2327;"></div><div class="discord-embed-root" c-id="99.2.1.1"><div class="discord-embed-wrapper" c-id="99.3.2.0"><div class="discord-embed-grid" c-id="99.4.3.0"><div class="discord-embed-title" c-id="99.5.4.0"><a href="https://github.com/toitlang/toit/pull/2642" target="_blank" rel="noopener noreferrer" c-id="99.6.5.0"><!--t.99.7.6.0-->Support active BLE scans. by floitsch · Pull Request #2642 · toitla...</a></div><!--s.99.8.4.1.description--><discord-embed-description slot="description" class="discord-embed-description hydrated" s-id="100" c-id="0.314"><!--r.100--><!--o.0.315--><!--s.100.0.0.0.--><!--t.0.315-->Active scans send a request to the device when they have received an advertisement.</discord-embed-description><!--s.99.9.4.2.fields--><img src="https://images-ext-1.discordapp.net/external/LDntd_KVmb8gOdQfd5tmzLcZiEVn-nK_j1NxwA06jEs/https/opengraph.githubassets.com/5b329dfa456a63db1fa68d9df005d390b7197646d5483a2fad635e943f7af2f5/toitlang/toit/pull/2642" alt="" class="discord-embed-thumbnail" c-id="99.10.4.3"><!--s.99.11.4.4.footer--></div></div></div></div></discord-embed><discord-embed embed-title="Give BLE scan more options. by floitsch · Pull Request #2643 · toit..." slot="embeds" color="#1e2327" thumbnail="https://images-ext-1.discordapp.net/external/lYHPSrinEoE26oyFWQMIg4fSnRXzNWx0Z_4i6lJGdY8/https/opengraph.githubassets.com/266195cce5715eedffd99037525a997a390749db95120e8396e30a601b50fa9b/toitlang/toit/pull/2643" url="https://github.com/toitlang/toit/pull/2643" class="hydrated" s-id="101" c-id="0.303"><!--r.101--><!--o.0.316--><div class="discord-embed" c-id="101.0.0.0"><div class="discord-left-border" c-id="101.1.1.0" style="background-color: #1e2327;"></div><div class="discord-embed-root" c-id="101.2.1.1"><div class="discord-embed-wrapper" c-id="101.3.2.0"><div class="discord-embed-grid" c-id="101.4.3.0"><div class="discord-embed-title" c-id="101.5.4.0"><a href="https://github.com/toitlang/toit/pull/2643" target="_blank" rel="noopener noreferrer" c-id="101.6.5.0"><!--t.101.7.6.0-->Give BLE scan more options. by floitsch · Pull Request #2643 · toit...</a></div><!--s.101.8.4.1.description--><discord-embed-description slot="description" class="discord-embed-description hydrated" s-id="102" c-id="0.316"><!--r.102--><!--o.0.317--><!--s.102.0.0.0.--><!--t.0.317-->Most users shouldn't touch them, but for power users it's nice to have them available.</discord-embed-description><!--s.101.9.4.2.fields--><img src="https://images-ext-1.discordapp.net/external/lYHPSrinEoE26oyFWQMIg4fSnRXzNWx0Z_4i6lJGdY8/https/opengraph.githubassets.com/266195cce5715eedffd99037525a997a390749db95120e8396e30a601b50fa9b/toitlang/toit/pull/2643" alt="" class="discord-embed-thumbnail" c-id="101.10.4.3"><!--s.101.11.4.4.footer--></div></div></div></div></discord-embed><discord-embed embed-title="Cleanups in the BLE library. by floitsch · Pull Request #2644 · toi..." slot="embeds" color="#1e2327" thumbnail="https://images-ext-1.discordapp.net/external/SC3avRoLGCRNWssaLes5SrYQjY-WgSLw8fGhb3rRw6I/https/opengraph.githubassets.com/2d9aed6672328ba0f3c2af30eeb54a818138880680291a3f581e149b432eb53f/toitlang/toit/pull/2644" url="https://github.com/toitlang/toit/pull/2644" class="hydrated" s-id="103" c-id="0.304"><!--r.103--><!--o.0.318--><div class="discord-embed" c-id="103.0.0.0"><div class="discord-left-border" c-id="103.1.1.0" style="background-color: #1e2327;"></div><div class="discord-embed-root" c-id="103.2.1.1"><div class="discord-embed-wrapper" c-id="103.3.2.0"><div class="discord-embed-grid" c-id="103.4.3.0"><div class="discord-embed-title" c-id="103.5.4.0"><a href="https://github.com/toitlang/toit/pull/2644" target="_blank" rel="noopener noreferrer" c-id="103.6.5.0"><!--t.103.7.6.0-->Cleanups in the BLE library. by floitsch · Pull Request #2644 · toi...</a></div><!--s.103.8.4.1.description--><discord-embed-description slot="description" class="discord-embed-description hydrated" s-id="104" c-id="0.318"><!--r.104--><!--o.0.319--><!--s.104.0.0.0.--><!--t.0.319-->Better names...</discord-embed-description><!--s.103.9.4.2.fields--><img src="https://images-ext-1.discordapp.net/external/SC3avRoLGCRNWssaLes5SrYQjY-WgSLw8fGhb3rRw6I/https/opengraph.githubassets.com/2d9aed6672328ba0f3c2af30eeb54a818138880680291a3f581e149b432eb53f/toitlang/toit/pull/2644" alt="" class="discord-embed-thumbnail" c-id="103.10.4.3"><!--s.103.11.4.4.footer--></div></div></div></div></discord-embed><!--s.94.17.3.1.attachments--><!--s.94.18.3.2.components--><!--s.94.19.3.3.reactions--><!--s.94.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1310311934351900812" timestamp="11/24/2024 06:31 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="105" c-id="0.36"><!--r.105--><!--o.0.320--><!--s.105.0.0.0.reply--><div class="discord-message-inner" c-id="105.1.0.1"><div class="discord-author-avatar" c-id="105.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="105.3.2.0"></div><div class="discord-message-content" c-id="105.4.1.1"><span class="discord-author-info" c-id="105.5.2.0"><span class="discord-author-username" c-id="105.6.3.0"><!--t.105.7.4.0-->floitsch</span><!--t.105.8.3.1--> </span><span class="discord-message-timestamp" c-id="105.9.2.1"><!--t.105.10.3.0-->11/24/2024 06:31 PM</span><div class="discord-message-body" c-id="105.11.2.2"><span class="discord-message-markup" c-id="105.12.3.0"><!--s.105.13.4.0.--><!--t.0.320-->Let me know if they solve your issues. (Once they have been committed).</span><!--t.105.14.3.1--> </div><div class="discord-message-compact-indent" c-id="105.15.2.3"><!--s.105.16.3.0.embeds--><!--s.105.17.3.1.attachments--><!--s.105.18.3.2.components--><!--s.105.19.3.3.reactions--><!--s.105.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1310410938842746950" timestamp="11/25/2024 01:05 AM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="106" c-id="0.37"><!--r.106--><!--o.0.321--><!--s.106.0.0.0.reply--><div class="discord-message-inner" c-id="106.1.0.1"><div class="discord-author-avatar" c-id="106.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="106.3.2.0"></div><div class="discord-message-content" c-id="106.4.1.1"><span class="discord-author-info" c-id="106.5.2.0"><span class="discord-author-username" c-id="106.6.3.0"><!--t.106.7.4.0-->Tej</span><!--t.106.8.3.1--> </span><span class="discord-message-timestamp" c-id="106.9.2.1"><!--t.106.10.3.0-->11/25/2024 01:05 AM</span><div class="discord-message-body" c-id="106.11.2.2"><span class="discord-message-markup" c-id="106.12.3.0"><!--s.106.13.4.0.--><!--t.0.321-->Thanks! Will give it a try.</span><!--t.106.14.3.1--> </div><div class="discord-message-compact-indent" c-id="106.15.2.3"><!--s.106.16.3.0.embeds--><!--s.106.17.3.1.attachments--><!--s.106.18.3.2.components--><!--s.106.19.3.3.reactions--><!--s.106.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1310962278916685885" timestamp="11/26/2024 01:36 PM" edited="false" highlight="false" profile="918505614055964742" class="discord-message hydrated" s-id="107" c-id="0.38"><!--r.107--><!--o.0.322--><!--s.107.0.0.0.reply--><div class="discord-message-inner" c-id="107.1.0.1"><div class="discord-author-avatar" c-id="107.2.1.0"><img src="https://cdn.discordapp.com/avatars/918505614055964742/51cdecb146e923055693bb5e75323ad6.webp?size=64" alt="bitphlipphar" c-id="107.3.2.0"></div><div class="discord-message-content" c-id="107.4.1.1"><span class="discord-author-info" c-id="107.5.2.0"><span class="discord-author-username" c-id="107.6.3.0"><!--t.107.7.4.0-->bitphlipphar</span><!--t.107.8.3.1--> </span><span class="discord-message-timestamp" c-id="107.9.2.1"><!--t.107.10.3.0-->11/26/2024 01:36 PM</span><div class="discord-message-body" c-id="107.11.2.2"><span class="discord-message-markup" c-id="107.12.3.0"><!--s.107.13.4.0.--><!--t.0.322-->Jaguar v1.45.0 comes with the new SDK that bundles all the changes.</span><!--t.107.14.3.1--> </div><div class="discord-message-compact-indent" c-id="107.15.2.3"><!--s.107.16.3.0.embeds--><!--s.107.17.3.1.attachments--><!--s.107.18.3.2.components--><!--s.107.19.3.3.reactions--><!--s.107.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1311936496911122483" timestamp="11/29/2024 06:07 AM" edited="false" highlight="false" profile="918505614055964742" class="discord-message hydrated" s-id="108" c-id="0.39"><!--r.108--><!--o.0.323--><!--o.0.324--><!--s.108.0.0.0.reply--><div class="discord-message-inner" c-id="108.1.0.1"><div class="discord-author-avatar" c-id="108.2.1.0"><img src="https://cdn.discordapp.com/avatars/918505614055964742/51cdecb146e923055693bb5e75323ad6.webp?size=64" alt="bitphlipphar" c-id="108.3.2.0"></div><div class="discord-message-content" c-id="108.4.1.1"><span class="discord-author-info" c-id="108.5.2.0"><span class="discord-author-username" c-id="108.6.3.0"><!--t.108.7.4.0-->bitphlipphar</span><!--t.108.8.3.1--> </span><span class="discord-message-timestamp" c-id="108.9.2.1"><!--t.108.10.3.0-->11/29/2024 06:07 AM</span><div class="discord-message-body" c-id="108.11.2.2"><span class="discord-message-markup" c-id="108.12.3.0"><!--s.108.13.4.0.--><discord-mention type="user" class="discord-mention discord-user-mention hydrated" s-id="109" c-id="0.323"><!--r.109--><!--o.0.325--><!--t.109.0.0.0-->@<!--s.109.1.0.1.--><!--t.0.325-->Tej</discord-mention><!--t.0.324--> Did you get a chance to try the changes?</span><!--t.108.14.3.1--> </div><div class="discord-message-compact-indent" c-id="108.15.2.3"><!--s.108.16.3.0.embeds--><!--s.108.17.3.1.attachments--><!--s.108.18.3.2.components--><!--s.108.19.3.3.reactions--><!--s.108.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1312421236881621074" timestamp="11/30/2024 02:13 PM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="110" c-id="0.40"><!--r.110--><!--o.0.326--><!--o.0.327--><!--o.0.328--><!--s.110.0.0.0.reply--><div class="discord-message-inner" c-id="110.1.0.1"><div class="discord-author-avatar" c-id="110.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="110.3.2.0"></div><div class="discord-message-content" c-id="110.4.1.1"><span class="discord-author-info" c-id="110.5.2.0"><span class="discord-author-username" c-id="110.6.3.0"><!--t.110.7.4.0-->Tej</span><!--t.110.8.3.1--> </span><span class="discord-message-timestamp" c-id="110.9.2.1"><!--t.110.10.3.0-->11/30/2024 02:13 PM</span><div class="discord-message-body" c-id="110.11.2.2"><span class="discord-message-markup" c-id="110.12.3.0"><!--s.110.13.4.0.--><discord-mention type="user" class="discord-mention discord-user-mention hydrated" s-id="111" c-id="0.326"><!--r.111--><!--o.0.329--><!--t.111.0.0.0-->@<!--s.111.1.0.1.--><!--t.0.329-->bitphlipphar</discord-mention><!--t.0.327--> will test this tomorrow. Got tied up in something.</span><!--t.110.14.3.1--> </div><div class="discord-message-compact-indent" c-id="110.15.2.3"><!--s.110.16.3.0.embeds--><!--s.110.17.3.1.attachments--><!--s.110.18.3.2.components--><!--s.110.19.3.3.reactions--><discord-reactions slot="reactions" class="discord-reactions hydrated" s-id="112" c-id="0.328"><!--r.112--><!--o.0.330--><!--s.112.0.0.0.--><discord-reaction name="🙏" emoji="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f64f.svg" count="1" class="hydrated" s-id="113" c-id="0.330"><!--r.113--><div class="discord-reaction" c-id="113.0.0.0"><div class="discord-reaction-inner" c-id="113.1.1.0"><img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f64f.svg" alt="🙏" draggable="false" c-id="113.2.2.0"><span class="discord-reaction-count" c-id="113.3.2.1"><!--t.113.4.3.0-->1</span></div></div></discord-reaction></discord-reactions><!--s.110.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1312825349620371597" timestamp="12/01/2024 04:59 PM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="114" c-id="0.41"><!--r.114--><!--o.0.331--><!--o.0.332--><!--o.0.333--><!--o.0.334--><!--o.0.335--><!--o.0.336--><!--o.0.337--><!--o.0.338--><!--o.0.339--><!--o.0.340--><!--o.0.341--><!--o.0.342--><!--o.0.343--><!--o.0.344--><!--o.0.345--><!--o.0.346--><!--o.0.347--><!--o.0.348--><!--o.0.349--><!--o.0.350--><!--o.0.351--><!--o.0.352--><!--o.0.353--><!--o.0.354--><!--o.0.355--><!--o.0.356--><!--s.114.0.0.0.reply--><div class="discord-message-inner" c-id="114.1.0.1"><div class="discord-author-avatar" c-id="114.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="114.3.2.0"></div><div class="discord-message-content" c-id="114.4.1.1"><span class="discord-author-info" c-id="114.5.2.0"><span class="discord-author-username" c-id="114.6.3.0"><!--t.114.7.4.0-->Tej</span><!--t.114.8.3.1--> </span><span class="discord-message-timestamp" c-id="114.9.2.1"><!--t.114.10.3.0-->12/01/2024 04:59 PM</span><div class="discord-message-body" c-id="114.11.2.2"><span class="discord-message-markup" c-id="114.12.3.0"><!--s.114.13.4.0.--><!--t.0.331-->Have set aside time to do more thorough testing tomorrow as I couldn't quite get the scan working correctly with:<br c-id="0.332"><br c-id="0.333"><discord-code-block language="" code="import ble
import encoding.hex


BEACON-SERVICE ::= ble.BleUuid &quot;FEAA&quot;
SCAN-DURATION   ::= Duration --s=-1

main:
  adapter := ble.Adapter
  central := adapter.central

  while true:
    addresses := Set
    data := []

    central.scan --duration=SCAN-DURATION 
                 --active=true 
                 --limited-only=false
                 --interval=160 
                 --window=158: 
                 | device/ble.RemoteScannedDevice |
      if device.data.services.contains BEACON-SERVICE:
        address := hex.encode device.address-bytes.stringify
        print device.identifier
        print device.address-bytes
        print device.address-type
        print device.data
    sleep Duration/5" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="115" c-id="0.334"><!--r.115--><code class="hljs language-plaintext" c-id="115.0.0.0">import ble
import encoding.hex


BEACON-SERVICE ::= ble.BleUuid "FEAA"
SCAN-DURATION   ::= Duration --s=-1

main:
  adapter := ble.Adapter
  central := adapter.central

  while true:
    addresses := Set
    data := []

    central.scan --duration=SCAN-DURATION 
                 --active=true 
                 --limited-only=false
                 --interval=160 
                 --window=158: 
                 | device/ble.RemoteScannedDevice |
      if device.data.services.contains BEACON-SERVICE:
        address := hex.encode device.address-bytes.stringify
        print device.identifier
        print device.address-bytes
        print device.address-type
        print device.data
    sleep Duration/5</code></discord-code-block><br c-id="0.335"><br c-id="0.336"><!--t.0.337-->Output:<br c-id="0.338"><discord-code-block language="" code="an instance with class-id 55
#[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
#[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
0" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="116" c-id="0.339"><!--r.116--><code class="hljs language-plaintext" c-id="116.0.0.0">an instance with class-id 55
#[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
#[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
0</code></discord-code-block><br c-id="0.340"><br c-id="0.341"><!--t.0.342-->## Notes<br c-id="0.343"><br c-id="0.344"><!--t.0.345-->1. <discord-inline-code class="hydrated" s-id="117" c-id="0.346"><!--r.117--><!--o.0.357--><code c-id="117.0.0.0"><!--s.117.1.1.0.--><!--t.0.357-->--limited-only=true</code></discord-inline-code><!--t.0.347--> does not give a result at all - whereas this parameter did not seem to have any effect in my Nimble example. <br c-id="0.348"><!--t.0.349-->2. Changing <discord-inline-code class="hydrated" s-id="118" c-id="0.350"><!--r.118--><!--o.0.358--><code c-id="118.0.0.0"><!--s.118.1.1.0.--><!--t.0.358-->interval</code></discord-inline-code><!--t.0.351--> and <discord-inline-code class="hydrated" s-id="119" c-id="0.352"><!--r.119--><!--o.0.359--><code c-id="119.0.0.0"><!--s.119.1.1.0.--><!--t.0.359-->window</code></discord-inline-code><!--t.0.353--> did not yield data either. <br c-id="0.354"><br c-id="0.355"><!--t.0.356-->Tomorrow I will build from source and print logs from the C layer to dig deeper.</span><!--t.114.14.3.1--> </div><div class="discord-message-compact-indent" c-id="114.15.2.3"><!--s.114.16.3.0.embeds--><!--s.114.17.3.1.attachments--><!--s.114.18.3.2.components--><!--s.114.19.3.3.reactions--><!--s.114.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1312825623198040165" timestamp="12/01/2024 05:00 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="120" c-id="0.42"><!--r.120--><!--o.0.360--><!--o.0.361--><!--o.0.362--><!--s.120.0.0.0.reply--><div class="discord-message-inner" c-id="120.1.0.1"><div class="discord-author-avatar" c-id="120.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="120.3.2.0"></div><div class="discord-message-content" c-id="120.4.1.1"><span class="discord-author-info" c-id="120.5.2.0"><span class="discord-author-username" c-id="120.6.3.0"><!--t.120.7.4.0-->floitsch</span><!--t.120.8.3.1--> </span><span class="discord-message-timestamp" c-id="120.9.2.1"><!--t.120.10.3.0-->12/01/2024 05:00 PM</span><div class="discord-message-body" c-id="120.11.2.2"><span class="discord-message-markup" c-id="120.12.3.0"><!--s.120.13.4.0.--><!--t.0.360-->Interesting. Curious about your findings. <br c-id="0.361"><!--t.0.362-->Thanks for testing.</span><!--t.120.14.3.1--> </div><div class="discord-message-compact-indent" c-id="120.15.2.3"><!--s.120.16.3.0.embeds--><!--s.120.17.3.1.attachments--><!--s.120.18.3.2.components--><!--s.120.19.3.3.reactions--><!--s.120.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313186988555374685" timestamp="12/02/2024 04:56 PM" edited="true" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="121" c-id="0.43"><!--r.121--><!--o.0.363--><!--o.0.364--><!--o.0.365--><!--o.0.366--><!--o.0.367--><!--o.0.368--><!--o.0.369--><!--o.0.370--><!--o.0.371--><!--o.0.372--><!--o.0.373--><!--o.0.374--><!--o.0.375--><!--o.0.376--><!--o.0.377--><!--s.121.0.0.0.reply--><div class="discord-message-inner" c-id="121.1.0.1"><div class="discord-author-avatar" c-id="121.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="121.3.2.0"></div><div class="discord-message-content" c-id="121.4.1.1"><span class="discord-author-info" c-id="121.5.2.0"><span class="discord-author-username" c-id="121.6.3.0"><!--t.121.7.4.0-->Tej</span><!--t.121.8.3.1--> </span><span class="discord-message-timestamp" c-id="121.9.2.1"><!--t.121.10.3.0-->12/02/2024 04:56 PM</span><div class="discord-message-body" c-id="121.11.2.2"><span class="discord-message-markup" c-id="121.12.3.0"><!--s.121.13.4.0.--><!--t.0.363-->I think I misinterpreted the data structure. I am infact getting the data correctly but not the name.<br c-id="0.364"><br c-id="0.365"><discord-code-block language="" code="// From C
E (6538) BLE: Discovery Event:
E (6538) BLE:   Address: 11:90:05:29:57:bc
E (6538) BLE:   RSSI: -89
E (6538) BLE:   Event Type: 0
E (6538) BLE:   Data Length: 29
E (6538) BLE:   Advertisement Data:
  02 01 06 03 03 aa fe 15 16 aa fe 21 04 0f 0b d4
  17 29 45 b6 ff e1 ff d2 03 f2 01 29 db
E (6548) BLE: Discovery Event:
E (6558) BLE:   Address: 11:90:05:29:57:bc
E (6558) BLE:   RSSI: -86
E (6558) BLE:   Event Type: 4
E (6568) BLE:   Data Length: 24
E (6568) BLE:   Advertisement Data:
  09 16 80 20 66 09 00 00 00 00 0d 09 42 4c 45 30
  30 30 30 30 30 30 31 31

// From Toit
ID: #[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address bytes: #[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address type: 0
Name: null
Data: #[0x02, 0x01, 0x06, 0x03, 0x03, 0xaa, 0xfe, 0x15, 0x16, 0xaa, 0xfe, 0x21, 0x04, 0x0f, 0x0b, 0xd4, 0x17, 0x29, 0x45, 0xb6, 0xff, 0xe1, 0xff, 0xd2, 0x03, 0xf2, 0x01, 0x29, 0xdb]" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="122" c-id="0.366"><!--r.122--><code class="hljs language-plaintext" c-id="122.0.0.0">// From C
E (6538) BLE: Discovery Event:
E (6538) BLE:   Address: 11:90:05:29:57:bc
E (6538) BLE:   RSSI: -89
E (6538) BLE:   Event Type: 0
E (6538) BLE:   Data Length: 29
E (6538) BLE:   Advertisement Data:
  02 01 06 03 03 aa fe 15 16 aa fe 21 04 0f 0b d4
  17 29 45 b6 ff e1 ff d2 03 f2 01 29 db
E (6548) BLE: Discovery Event:
E (6558) BLE:   Address: 11:90:05:29:57:bc
E (6558) BLE:   RSSI: -86
E (6558) BLE:   Event Type: 4
E (6568) BLE:   Data Length: 24
E (6568) BLE:   Advertisement Data:
  09 16 80 20 66 09 00 00 00 00 0d 09 42 4c 45 30
  30 30 30 30 30 30 31 31

// From Toit
ID: #[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address bytes: #[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address type: 0
Name: null
Data: #[0x02, 0x01, 0x06, 0x03, 0x03, 0xaa, 0xfe, 0x15, 0x16, 0xaa, 0xfe, 0x21, 0x04, 0x0f, 0x0b, 0xd4, 0x17, 0x29, 0x45, 0xb6, 0xff, 0xe1, 0xff, 0xd2, 0x03, 0xf2, 0x01, 0x29, 0xdb]</code></discord-code-block><br c-id="0.367"><br c-id="0.368"><!--t.0.369-->The ESP_LOGE statements are the same as my <discord-inline-code class="hydrated" s-id="123" c-id="0.370"><!--r.123--><!--o.0.378--><code c-id="123.0.0.0"><!--s.123.1.1.0.--><!--t.0.378-->ble_esp32.cc</code></discord-inline-code><!--t.0.371--> attachment from earlier. The Toit code is:<br c-id="0.372"><br c-id="0.373"><discord-code-block language="" code="print &quot;ID: &quot; + device.identifier.stringify
print &quot;Address bytes: &quot; + device.address-bytes.stringify
print &quot;Address type: &quot; + device.address-type.stringify
print &quot;Name: &quot; + device.data.name.stringify
print &quot;Data: &quot; + device.data.to-raw.stringify" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="124" c-id="0.374"><!--r.124--><code class="hljs language-plaintext" c-id="124.0.0.0">print "ID: " + device.identifier.stringify
print "Address bytes: " + device.address-bytes.stringify
print "Address type: " + device.address-type.stringify
print "Name: " + device.data.name.stringify
print "Data: " + device.data.to-raw.stringify</code></discord-code-block><br c-id="0.375"><br c-id="0.376"><!--t.0.377-->Given the name comes from the second scan event (type 4), is it possible that the response from this event is not being copied over?</span><span class="discord-message-edited" c-id="121.14.3.1"><!--t.121.15.4.0-->(edited)</span></div><div class="discord-message-compact-indent" c-id="121.16.2.3"><!--s.121.17.3.0.embeds--><!--s.121.18.3.1.attachments--><!--s.121.19.3.2.components--><!--s.121.20.3.3.reactions--><!--s.121.21.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313187370614526012" timestamp="12/02/2024 04:57 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="125" c-id="0.44"><!--r.125--><!--o.0.379--><!--o.0.380--><!--o.0.381--><!--o.0.382--><!--s.125.0.0.0.reply--><div class="discord-message-inner" c-id="125.1.0.1"><div class="discord-author-avatar" c-id="125.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="125.3.2.0"></div><div class="discord-message-content" c-id="125.4.1.1"><span class="discord-author-info" c-id="125.5.2.0"><span class="discord-author-username" c-id="125.6.3.0"><!--t.125.7.4.0-->floitsch</span><!--t.125.8.3.1--> </span><span class="discord-message-timestamp" c-id="125.9.2.1"><!--t.125.10.3.0-->12/02/2024 04:57 PM</span><div class="discord-message-body" c-id="125.11.2.2"><span class="discord-message-markup" c-id="125.12.3.0"><!--s.125.13.4.0.--><!--t.0.379-->I will try to have a look later today or early tomorrow. <br c-id="0.380"><!--t.0.381-->If there isn't any update tomorrow please remind me.</span><!--t.125.14.3.1--> </div><div class="discord-message-compact-indent" c-id="125.15.2.3"><!--s.125.16.3.0.embeds--><!--s.125.17.3.1.attachments--><!--s.125.18.3.2.components--><!--s.125.19.3.3.reactions--><discord-reactions slot="reactions" class="discord-reactions hydrated" s-id="126" c-id="0.382"><!--r.126--><!--o.0.383--><!--s.126.0.0.0.--><discord-reaction name="👍" emoji="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f44d.svg" count="1" class="hydrated" s-id="127" c-id="0.383"><!--r.127--><div class="discord-reaction" c-id="127.0.0.0"><div class="discord-reaction-inner" c-id="127.1.1.0"><img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f44d.svg" alt="👍" draggable="false" c-id="127.2.2.0"><span class="discord-reaction-count" c-id="127.3.2.1"><!--t.127.4.3.0-->1</span></div></div></discord-reaction></discord-reactions><!--s.125.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313433292787154977" timestamp="12/03/2024 09:14 AM" edited="true" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="128" c-id="0.45"><!--r.128--><!--o.0.384--><!--o.0.385--><!--o.0.386--><!--o.0.387--><!--o.0.388--><!--s.128.0.0.0.reply--><div class="discord-message-inner" c-id="128.1.0.1"><div class="discord-author-avatar" c-id="128.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="128.3.2.0"></div><div class="discord-message-content" c-id="128.4.1.1"><span class="discord-author-info" c-id="128.5.2.0"><span class="discord-author-username" c-id="128.6.3.0"><!--t.128.7.4.0-->floitsch</span><!--t.128.8.3.1--> </span><span class="discord-message-timestamp" c-id="128.9.2.1"><!--t.128.10.3.0-->12/03/2024 09:14 AM</span><div class="discord-message-body" c-id="128.11.2.2"><span class="discord-message-markup" c-id="128.12.3.0"><!--s.128.13.4.0.--><!--t.0.384-->Starting to look at this.<br c-id="0.385"><!--t.0.386-->In theory you should get 2 different <discord-inline-code class="hydrated" s-id="129" c-id="0.387"><!--r.129--><!--o.0.389--><code c-id="129.0.0.0"><!--s.129.1.1.0.--><!--t.0.389-->RemoteScannedDevice</code></discord-inline-code><!--t.0.388--> objects in Toit. It would be up to you to merge them.</span><span class="discord-message-edited" c-id="128.14.3.1"><!--t.128.15.4.0-->(edited)</span></div><div class="discord-message-compact-indent" c-id="128.16.2.3"><!--s.128.17.3.0.embeds--><!--s.128.18.3.1.attachments--><!--s.128.19.3.2.components--><!--s.128.20.3.3.reactions--><!--s.128.21.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313433686762323980" timestamp="12/03/2024 09:16 AM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="130" c-id="0.46"><!--r.130--><!--o.0.390--><!--o.0.391--><!--o.0.392--><!--o.0.393--><!--s.130.0.0.0.reply--><div class="discord-message-inner" c-id="130.1.0.1"><div class="discord-author-avatar" c-id="130.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="130.3.2.0"></div><div class="discord-message-content" c-id="130.4.1.1"><span class="discord-author-info" c-id="130.5.2.0"><span class="discord-author-username" c-id="130.6.3.0"><!--t.130.7.4.0-->floitsch</span><!--t.130.8.3.1--> </span><span class="discord-message-timestamp" c-id="130.9.2.1"><!--t.130.10.3.0-->12/03/2024 09:16 AM</span><div class="discord-message-body" c-id="130.11.2.2"><span class="discord-message-markup" c-id="130.12.3.0"><!--s.130.13.4.0.--><!--t.0.390-->You can use <discord-inline-code class="hydrated" s-id="131" c-id="0.391"><!--r.131--><!--o.0.394--><code c-id="131.0.0.0"><!--s.131.1.1.0.--><!--t.0.394-->is-scan-response</code></discord-inline-code><!--t.0.392--> to distinguish between the two: <a href="https://libs.toit.io/ble/remote/class-RemoteScannedDevice#is-scan-response" target="_blank" rel="noreferrer" c-id="0.393">https://libs.toit.io/ble/remote/class-RemoteScannedDevice#is-scan-response</a></span><!--t.130.14.3.1--> </div><div class="discord-message-compact-indent" c-id="130.15.2.3"><!--s.130.16.3.0.embeds--><!--s.130.17.3.1.attachments--><!--s.130.18.3.2.components--><!--s.130.19.3.3.reactions--><!--s.130.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313445561562566738" timestamp="12/03/2024 10:03 AM" edited="false" server="false" highlight="false" profile="918505614055964742" class="discord-message hydrated" s-id="132" c-id="0.47"><!--r.132--><!--o.0.395--><!--o.0.396--><!--o.0.397--><!--o.0.398--><!--o.0.399--><!--o.0.401--><!--o.0.402--><!--s.132.0.0.0.reply--><discord-reply slot="reply" edited="true" attachment="false" author="Tej" avatar="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" bot="false" verified="false" op="true" command="false" class="discord-replied-message hydrated" s-id="133" c-id="0.395"><!--r.133--><!--o.0.403--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=32" alt="Tej" c-id="133.0.0.0"><span class="discord-application-tag discord-application-tag-op" c-id="133.1.0.1"><!--t.133.2.1.0-->OP</span><span class="discord-replied-message-username" c-id="133.3.0.2"><!--t.133.4.1.0-->Tej</span><div class="discord-replied-message-content" c-id="133.5.0.3"><!--s.133.6.1.0.--><span data-goto="1313186988555374685" c-id="0.403">I think I misinterpreted the data structure. I am infact getting the data correctly but not the name.  ``` // From C E (6538) BLE: Discovery Event: E (6538) BLE:   Address: 11:90:0...</span><span class="discord-message-edited" c-id="133.7.1.1"><!--t.133.8.2.0-->(edited)</span></div></discord-reply><div class="discord-message-inner" c-id="132.1.0.1"><div class="discord-author-avatar" c-id="132.2.1.0"><img src="https://cdn.discordapp.com/avatars/918505614055964742/51cdecb146e923055693bb5e75323ad6.webp?size=64" alt="bitphlipphar" c-id="132.3.2.0"></div><div class="discord-message-content" c-id="132.4.1.1"><span class="discord-author-info" c-id="132.5.2.0"><span class="discord-author-username" c-id="132.6.3.0"><!--t.132.7.4.0-->bitphlipphar</span><!--t.132.8.3.1--> </span><span class="discord-message-timestamp" c-id="132.9.2.1"><!--t.132.10.3.0-->12/03/2024 10:03 AM</span><div class="discord-message-body" c-id="132.11.2.2"><span class="discord-message-markup" c-id="132.12.3.0"><!--s.132.13.4.0.--><!--t.0.396-->You may want to get used to <discord-inline-code class="hydrated" s-id="134" c-id="0.397"><!--r.134--><!--o.0.404--><code c-id="134.0.0.0"><!--s.134.1.1.0.--><!--t.0.404-->print "ID: $device.identifier"</code></discord-inline-code><!--t.0.398--> instead of the manual stringification and concatenation with <discord-inline-code class="hydrated" s-id="135" c-id="0.399"><!--r.135--><!--o.0.405--><code c-id="135.0.0.0"><!--s.135.1.1.0.--><!--t.0.405-->+</code></discord-inline-code> <discord-custom-emoji name="🙂" url="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f642.svg" embed-emoji="false" class="hydrated" s-id="136" c-id="0.401"><!--r.136--><span class="discord-custom-emoji" c-id="136.0.0.0"><img aria-label=":🙂:" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f642.svg" alt=":🙂:" draggable="false" class="discord-custom-emoji-image" c-id="136.1.1.0"></span></discord-custom-emoji></span><!--t.132.14.3.1--> </div><div class="discord-message-compact-indent" c-id="132.15.2.3"><!--s.132.16.3.0.embeds--><!--s.132.17.3.1.attachments--><!--s.132.18.3.2.components--><!--s.132.19.3.3.reactions--><discord-reactions slot="reactions" class="discord-reactions hydrated" s-id="137" c-id="0.402"><!--r.137--><!--o.0.406--><!--s.137.0.0.0.--><discord-reaction name="😅" emoji="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f605.svg" count="1" class="hydrated" s-id="138" c-id="0.406"><!--r.138--><div class="discord-reaction" c-id="138.0.0.0"><div class="discord-reaction-inner" c-id="138.1.1.0"><img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f605.svg" alt="😅" draggable="false" c-id="138.2.2.0"><span class="discord-reaction-count" c-id="138.3.2.1"><!--t.138.4.3.0-->1</span></div></div></discord-reaction></discord-reactions><!--s.132.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313555349583822919" timestamp="12/03/2024 05:20 PM" edited="false" server="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="139" c-id="0.48"><!--r.139--><!--o.0.407--><!--o.0.408--><!--o.0.409--><!--o.0.410--><!--o.0.411--><!--o.0.412--><!--o.0.413--><!--o.0.414--><!--o.0.415--><!--o.0.416--><!--o.0.417--><!--o.0.418--><!--o.0.419--><!--o.0.420--><!--o.0.421--><!--o.0.422--><!--o.0.423--><!--o.0.424--><!--s.139.0.0.0.reply--><discord-reply slot="reply" edited="true" attachment="false" author="floitsch" avatar="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=32" bot="false" verified="false" op="false" command="false" class="discord-replied-message hydrated" s-id="140" c-id="0.407"><!--r.140--><!--o.0.425--><img class="discord-replied-message-avatar" src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=32" alt="floitsch" c-id="140.0.0.0"><span class="discord-replied-message-username" c-id="140.1.0.1"><!--t.140.2.1.0-->floitsch</span><div class="discord-replied-message-content" c-id="140.3.0.2"><!--s.140.4.1.0.--><span data-goto="1313433292787154977" c-id="0.425">Starting to look at this. In theory you should get 2 different <discord-inline-code class="hydrated" s-id="141"><!--r.141--><!--o.0.426--><code c-id="141.0.0.0"><!--s.141.1.1.0.--><!--t.0.426-->RemoteScannedDevice</code></discord-inline-code> objects in Toit. It would be up to you to merge them.</span><span class="discord-message-edited" c-id="140.5.1.1"><!--t.140.6.2.0-->(edited)</span></div></discord-reply><div class="discord-message-inner" c-id="139.1.0.1"><div class="discord-author-avatar" c-id="139.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="139.3.2.0"></div><div class="discord-message-content" c-id="139.4.1.1"><span class="discord-author-info" c-id="139.5.2.0"><span class="discord-author-username" c-id="139.6.3.0"><!--t.139.7.4.0-->Tej</span><!--t.139.8.3.1--> </span><span class="discord-message-timestamp" c-id="139.9.2.1"><!--t.139.10.3.0-->12/03/2024 05:20 PM</span><div class="discord-message-body" c-id="139.11.2.2"><span class="discord-message-markup" c-id="139.12.3.0"><!--s.139.13.4.0.--><!--t.0.408-->Got it. I think I missed that in the docs. Unclear to me how I would go about the merge, though. This is probably mostly because I am yet to internalise the Toit way of working (see above!). <br c-id="0.409"><br c-id="0.410"><!--t.0.411-->Will I get multiple <discord-inline-code class="hydrated" s-id="142" c-id="0.412"><!--r.142--><!--o.0.427--><code c-id="142.0.0.0"><!--s.142.1.1.0.--><!--t.0.427-->RemoteScannedDevice</code></discord-inline-code><!--t.0.413--> entries. i.e. a <discord-inline-code class="hydrated" s-id="143" c-id="0.414"><!--r.143--><!--o.0.428--><code c-id="143.0.0.0"><!--s.143.1.1.0.--><!--t.0.428-->List</code></discord-inline-code><!--t.0.415-->? Or will the <discord-inline-code class="hydrated" s-id="144" c-id="0.416"><!--r.144--><!--o.0.429--><code c-id="144.0.0.0"><!--s.144.1.1.0.--><!--t.0.429-->block</code></discord-inline-code><!--t.0.417--> get called on each response, i.e. once for the <discord-inline-code class="hydrated" s-id="145" c-id="0.418"><!--r.145--><!--o.0.430--><code c-id="145.0.0.0"><!--s.145.1.1.0.--><!--t.0.430-->Discovery</code></discord-inline-code><!--t.0.419--> event and once for the <discord-inline-code class="hydrated" s-id="146" c-id="0.420"><!--r.146--><!--o.0.431--><code c-id="146.0.0.0"><!--s.146.1.1.0.--><!--t.0.431-->Scan Response</code></discord-inline-code><!--t.0.421-->? <br c-id="0.422"><br c-id="0.423"><!--t.0.424-->If it's the latter, I should have seen the data in my prints at least once but I didn't. I will refactor the code to do the merge and try again.</span><!--t.139.14.3.1--> </div><div class="discord-message-compact-indent" c-id="139.15.2.3"><!--s.139.16.3.0.embeds--><!--s.139.17.3.1.attachments--><!--s.139.18.3.2.components--><!--s.139.19.3.3.reactions--><!--s.139.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313555568543141994" timestamp="12/03/2024 05:20 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="147" c-id="0.49"><!--r.147--><!--o.0.432--><!--s.147.0.0.0.reply--><div class="discord-message-inner" c-id="147.1.0.1"><div class="discord-author-avatar" c-id="147.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="147.3.2.0"></div><div class="discord-message-content" c-id="147.4.1.1"><span class="discord-author-info" c-id="147.5.2.0"><span class="discord-author-username" c-id="147.6.3.0"><!--t.147.7.4.0-->floitsch</span><!--t.147.8.3.1--> </span><span class="discord-message-timestamp" c-id="147.9.2.1"><!--t.147.10.3.0-->12/03/2024 05:20 PM</span><div class="discord-message-body" c-id="147.11.2.2"><span class="discord-message-markup" c-id="147.12.3.0"><!--s.147.13.4.0.--><!--t.0.432-->In theory your block should have been called twice; once for each response.</span><!--t.147.14.3.1--> </div><div class="discord-message-compact-indent" c-id="147.15.2.3"><!--s.147.16.3.0.embeds--><!--s.147.17.3.1.attachments--><!--s.147.18.3.2.components--><!--s.147.19.3.3.reactions--><!--s.147.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313556371328864286" timestamp="12/03/2024 05:24 PM" edited="true" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="148" c-id="0.50"><!--r.148--><!--o.0.433--><!--o.0.434--><!--o.0.435--><!--o.0.436--><!--o.0.437--><!--s.148.0.0.0.reply--><div class="discord-message-inner" c-id="148.1.0.1"><div class="discord-author-avatar" c-id="148.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="148.3.2.0"></div><div class="discord-message-content" c-id="148.4.1.1"><span class="discord-author-info" c-id="148.5.2.0"><span class="discord-author-username" c-id="148.6.3.0"><!--t.148.7.4.0-->floitsch</span><!--t.148.8.3.1--> </span><span class="discord-message-timestamp" c-id="148.9.2.1"><!--t.148.10.3.0-->12/03/2024 05:24 PM</span><div class="discord-message-body" c-id="148.11.2.2"><span class="discord-message-markup" c-id="148.12.3.0"><!--s.148.13.4.0.--><!--t.0.433-->It's not documented, but you can easily merge two advertisements by just merging their data-block lists.<br c-id="0.434"><!--t.0.435-->From memory this should be something like:<br c-id="0.436"><discord-code-block language="" code="scanned-device1 := ...
scanned-device2 := ...
merged-blocks := scanned-device1.data.data-blocks + scanned-device2.data.data-blocks
merged-advertisement := Advertisement merged-blocks --no-check-size
print merged-advertisement.name
..." class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="149" c-id="0.437"><!--r.149--><code class="hljs language-plaintext" c-id="149.0.0.0">scanned-device1 := ...
scanned-device2 := ...
merged-blocks := scanned-device1.data.data-blocks + scanned-device2.data.data-blocks
merged-advertisement := Advertisement merged-blocks --no-check-size
print merged-advertisement.name
...</code></discord-code-block></span><span class="discord-message-edited" c-id="148.14.3.1"><!--t.148.15.4.0-->(edited)</span></div><div class="discord-message-compact-indent" c-id="148.16.2.3"><!--s.148.17.3.0.embeds--><!--s.148.18.3.1.attachments--><!--s.148.19.3.2.components--><!--s.148.20.3.3.reactions--><!--s.148.21.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313556798501945354" timestamp="12/03/2024 05:25 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="150" c-id="0.51"><!--r.150--><!--o.0.438--><!--s.150.0.0.0.reply--><div class="discord-message-inner" c-id="150.1.0.1"><div class="discord-author-avatar" c-id="150.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="150.3.2.0"></div><div class="discord-message-content" c-id="150.4.1.1"><span class="discord-author-info" c-id="150.5.2.0"><span class="discord-author-username" c-id="150.6.3.0"><!--t.150.7.4.0-->floitsch</span><!--t.150.8.3.1--> </span><span class="discord-message-timestamp" c-id="150.9.2.1"><!--t.150.10.3.0-->12/03/2024 05:25 PM</span><div class="discord-message-body" c-id="150.11.2.2"><span class="discord-message-markup" c-id="150.12.3.0"><!--s.150.13.4.0.--><!--t.0.438-->And I will update the doc (both for the scan-result as well as how to merge them).</span><!--t.150.14.3.1--> </div><div class="discord-message-compact-indent" c-id="150.15.2.3"><!--s.150.16.3.0.embeds--><!--s.150.17.3.1.attachments--><!--s.150.18.3.2.components--><!--s.150.19.3.3.reactions--><!--s.150.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313566626960117813" timestamp="12/03/2024 06:04 PM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="151" c-id="0.52"><!--r.151--><!--o.0.439--><!--o.0.440--><!--o.0.441--><!--o.0.442--><!--o.0.443--><!--o.0.444--><!--o.0.445--><!--o.0.446--><!--o.0.447--><!--o.0.448--><!--o.0.449--><!--o.0.450--><!--o.0.451--><!--o.0.452--><!--o.0.453--><!--o.0.454--><!--o.0.455--><!--o.0.456--><!--o.0.457--><!--s.151.0.0.0.reply--><div class="discord-message-inner" c-id="151.1.0.1"><div class="discord-author-avatar" c-id="151.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="151.3.2.0"></div><div class="discord-message-content" c-id="151.4.1.1"><span class="discord-author-info" c-id="151.5.2.0"><span class="discord-author-username" c-id="151.6.3.0"><!--t.151.7.4.0-->Tej</span><!--t.151.8.3.1--> </span><span class="discord-message-timestamp" c-id="151.9.2.1"><!--t.151.10.3.0-->12/03/2024 06:04 PM</span><div class="discord-message-body" c-id="151.11.2.2"><span class="discord-message-markup" c-id="151.12.3.0"><!--s.151.13.4.0.--><!--t.0.439-->Definitely getting multiple callbacks (count depends on <discord-inline-code class="hydrated" s-id="152" c-id="0.440"><!--r.152--><!--o.0.458--><code c-id="152.0.0.0"><!--s.152.1.1.0.--><!--t.0.458-->duration</code></discord-inline-code><!--t.0.441-->) but only for <discord-inline-code class="hydrated" s-id="153" c-id="0.442"><!--r.153--><!--o.0.459--><code c-id="153.0.0.0"><!--s.153.1.1.0.--><!--t.0.459-->Discovery</code></discord-inline-code><!--t.0.443-->. <br c-id="0.444"><br c-id="0.445"><discord-code-block language="" code="ID: #[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address bytes: #[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address type: 0
Name: null
Data: #[0x02, 0x01, 0x06, 0x03, 0x03, 0xaa, 0xfe, 0x11, 0x16, 0xaa, 0xfe, 0x20, 0x00, 0x0b, 0xd2, 0x17, 0x33, 0x00, 0x4b, 0xe8, 0x01, 0x
01, 0xf8, 0x3e, 0x16]
Is Scan Response: false

ID: #[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address bytes: #[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address type: 0
Name: null
Data: #[0x02, 0x01, 0x06, 0x03, 0x03, 0xaa, 0xfe, 0x15, 0x16, 0xaa, 0xfe, 0x21, 0x04, 0x0f, 0x0b, 0xd2, 0x17, 0x33, 0x47, 0xf3, 0xff, 0x
e1, 0xff, 0xd2, 0x03, 0xf2, 0x01, 0x2b, 0x06]
Is Scan Response: false

// Repeats..." class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="154" c-id="0.446"><!--r.154--><code class="hljs language-plaintext" c-id="154.0.0.0">ID: #[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address bytes: #[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address type: 0
Name: null
Data: #[0x02, 0x01, 0x06, 0x03, 0x03, 0xaa, 0xfe, 0x11, 0x16, 0xaa, 0xfe, 0x20, 0x00, 0x0b, 0xd2, 0x17, 0x33, 0x00, 0x4b, 0xe8, 0x01, 0x
01, 0xf8, 0x3e, 0x16]
Is Scan Response: false

ID: #[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address bytes: #[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address type: 0
Name: null
Data: #[0x02, 0x01, 0x06, 0x03, 0x03, 0xaa, 0xfe, 0x15, 0x16, 0xaa, 0xfe, 0x21, 0x04, 0x0f, 0x0b, 0xd2, 0x17, 0x33, 0x47, 0xf3, 0xff, 0x
e1, 0xff, 0xd2, 0x03, 0xf2, 0x01, 0x2b, 0x06]
Is Scan Response: false

// Repeats...</code></discord-code-block><br c-id="0.447"><br c-id="0.448"><!--t.0.449-->I simplified the code to do a single scan:<br c-id="0.450"><br c-id="0.451"><discord-code-block language="" code="import ble
import encoding.hex


BEACON-SERVICE ::= ble.BleUuid &quot;FEAA&quot;
SCAN-DURATION   ::= Duration --s=1

main:
  adapter := ble.Adapter
  central := adapter.central

  central.scan --duration=SCAN-DURATION 
                --active=true 
                --limited-only=true
                --interval=160 
                --window=158: 
                | device/ble.RemoteScannedDevice |
    if device.data.services.contains BEACON-SERVICE:
      address := hex.encode device.address-bytes.stringify
      print &quot;ID: $device.identifier&quot;
      print &quot;Address bytes: $device.address-bytes&quot;
      print &quot;Address type: $device.address-type&quot;
      print &quot;Name: $device.data.name&quot;
      print &quot;Data: $device.data.to-raw&quot;
      print &quot;Is Scan Response: $device.is-scan-response&quot;" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="155" c-id="0.452"><!--r.155--><code class="hljs language-plaintext" c-id="155.0.0.0">import ble
import encoding.hex


BEACON-SERVICE ::= ble.BleUuid "FEAA"
SCAN-DURATION   ::= Duration --s=1

main:
  adapter := ble.Adapter
  central := adapter.central

  central.scan --duration=SCAN-DURATION 
                --active=true 
                --limited-only=true
                --interval=160 
                --window=158: 
                | device/ble.RemoteScannedDevice |
    if device.data.services.contains BEACON-SERVICE:
      address := hex.encode device.address-bytes.stringify
      print "ID: $device.identifier"
      print "Address bytes: $device.address-bytes"
      print "Address type: $device.address-type"
      print "Name: $device.data.name"
      print "Data: $device.data.to-raw"
      print "Is Scan Response: $device.is-scan-response"</code></discord-code-block><br c-id="0.453"><br c-id="0.454"><!--t.0.455-->Can you point me to where you pass the data to Toit from <discord-inline-code class="hydrated" s-id="156" c-id="0.456"><!--r.156--><!--o.0.460--><code c-id="156.0.0.0"><!--s.156.1.1.0.--><!--t.0.460-->ble_esp32.cc</code></discord-inline-code><!--t.0.457--> - I can try and debug further from there.</span><!--t.151.14.3.1--> </div><div class="discord-message-compact-indent" c-id="151.15.2.3"><!--s.151.16.3.0.embeds--><!--s.151.17.3.1.attachments--><!--s.151.18.3.2.components--><!--s.151.19.3.3.reactions--><!--s.151.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1313568639328452618" timestamp="12/03/2024 06:12 PM" edited="false" highlight="false" profile="918882589060792390" class="discord-message hydrated" s-id="157" c-id="0.53"><!--r.157--><!--o.0.461--><!--o.0.462--><!--o.0.463--><!--o.0.464--><!--o.0.465--><!--o.0.466--><!--o.0.467--><!--o.0.468--><!--o.0.469--><!--o.0.470--><!--o.0.471--><!--o.0.472--><!--o.0.473--><!--o.0.474--><!--o.0.475--><!--o.0.476--><!--o.0.477--><!--o.0.478--><!--o.0.479--><!--o.0.480--><!--o.0.481--><!--o.0.482--><!--o.0.483--><!--o.0.484--><!--o.0.485--><!--o.0.486--><!--o.0.487--><!--o.0.488--><!--s.157.0.0.0.reply--><div class="discord-message-inner" c-id="157.1.0.1"><div class="discord-author-avatar" c-id="157.2.1.0"><img src="https://cdn.discordapp.com/avatars/918882589060792390/7ed6713dc7e01a803e477fe10bc8d77b.webp?size=64" alt="floitsch" c-id="157.3.2.0"></div><div class="discord-message-content" c-id="157.4.1.1"><span class="discord-author-info" c-id="157.5.2.0"><span class="discord-author-username" c-id="157.6.3.0"><!--t.157.7.4.0-->floitsch</span><!--t.157.8.3.1--> </span><span class="discord-message-timestamp" c-id="157.9.2.1"><!--t.157.10.3.0-->12/03/2024 06:12 PM</span><div class="discord-message-body" c-id="157.11.2.2"><span class="discord-message-markup" c-id="157.12.3.0"><!--s.157.13.4.0.--><!--t.0.461-->Interesting.<br c-id="0.462"><!--t.0.463-->The discovered peripheral is created here: <a href="https://github.com/toitlang/toit/blob/9bc1f09a2da28139d598162f17182479a9351e0c/src/resources/ble_esp32.cc#L1725" target="_blank" rel="noreferrer" c-id="0.464">https://github.com/toitlang/toit/blob/9bc1f09a2da28139d598162f17182479a9351e0c/src/resources/ble_esp32.cc#L1725</a><br c-id="0.465"><!--t.0.466-->We then take them out of the queue in the <discord-inline-code class="hydrated" s-id="158" c-id="0.467"><!--r.158--><!--o.0.489--><code c-id="158.0.0.0"><!--s.158.1.1.0.--><!--t.0.489-->scan_next</code></discord-inline-code><!--t.0.468--> function here:<br c-id="0.469"><a href="https://github.com/toitlang/toit/blob/9bc1f09a2da28139d598162f17182479a9351e0c/src/resources/ble_esp32.cc#L2485" target="_blank" rel="noreferrer" c-id="0.470">https://github.com/toitlang/toit/blob/9bc1f09a2da28139d598162f17182479a9351e0c/src/resources/ble_esp32.cc#L2485</a><br c-id="0.471"><br c-id="0.472"><!--t.0.473-->I think the reason it doesn't work for you is that the scan-response doesn't have the service (<discord-inline-code class="hydrated" s-id="159" c-id="0.474"><!--r.159--><!--o.0.490--><code c-id="159.0.0.0"><!--s.159.1.1.0.--><!--t.0.490-->BEACON-SERVICE</code></discord-inline-code><!--t.0.475-->) anymore. If you look at the raw data, you can see that the first advertisement data contains the service (<discord-inline-code class="hydrated" s-id="160" c-id="0.476"><!--r.160--><!--o.0.491--><code c-id="160.0.0.0"><!--s.160.1.1.0.--><!--t.0.491-->aa fe</code></discord-inline-code><!--t.0.477-->), but the scan response doesn't.<br c-id="0.478"><!--t.0.479-->So you would need to collect the identifier (<discord-inline-code class="hydrated" s-id="161" c-id="0.480"><!--r.161--><!--o.0.492--><code c-id="161.0.0.0"><!--s.161.1.1.0.--><!--t.0.492-->discovered-device.identifier</code></discord-inline-code><!--t.0.481-->) and then allow also scanned-device objects that don't have the <discord-inline-code class="hydrated" s-id="162" c-id="0.482"><!--r.162--><!--o.0.493--><code c-id="162.0.0.0"><!--s.162.1.1.0.--><!--t.0.493-->BEACON-SERVICE</code></discord-inline-code><!--t.0.483--> but where you know that they have that service.<br c-id="0.484"><!--t.0.485-->Something like:<br c-id="0.486"><discord-code-block language="" code="found-devices := {}
central.scan ...
  if device.data.contains-service BEACON-SERVICE or found-devices.contains device.identifier:
    found-devices.add device.identifier
    ..." class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="163" c-id="0.487"><!--r.163--><code class="hljs language-plaintext" c-id="163.0.0.0">found-devices := {}
central.scan ...
  if device.data.contains-service BEACON-SERVICE or found-devices.contains device.identifier:
    found-devices.add device.identifier
    ...</code></discord-code-block></span><!--t.157.14.3.1--> </div><div class="discord-message-compact-indent" c-id="157.15.2.3"><!--s.157.16.3.0.embeds--><discord-embed embed-title="toit/src/resources/ble_esp32.cc at 9bc1f09a2da28139d598162f17182479..." slot="embeds" color="#1e2327" thumbnail="https://images-ext-1.discordapp.net/external/FIymthQry1tjKmeI2C1tCvRQFHUzDxO0k5nc9ALP170/https/repository-images.githubusercontent.com/427260190/af05f930-cb7a-40fb-9dcc-bead2e3ce630" url="https://github.com/toitlang/toit/blob/9bc1f09a2da28139d598162f17182479a9351e0c/src/resources/ble_esp32.cc" class="hydrated" s-id="164" c-id="0.488"><!--r.164--><!--o.0.494--><div class="discord-embed" c-id="164.0.0.0"><div class="discord-left-border" c-id="164.1.1.0" style="background-color: #1e2327;"></div><div class="discord-embed-root" c-id="164.2.1.1"><div class="discord-embed-wrapper" c-id="164.3.2.0"><div class="discord-embed-grid" c-id="164.4.3.0"><div class="discord-embed-title" c-id="164.5.4.0"><a href="https://github.com/toitlang/toit/blob/9bc1f09a2da28139d598162f17182479a9351e0c/src/resources/ble_esp32.cc" target="_blank" rel="noopener noreferrer" c-id="164.6.5.0"><!--t.164.7.6.0-->toit/src/resources/ble_esp32.cc at 9bc1f09a2da28139d598162f17182479...</a></div><!--s.164.8.4.1.description--><discord-embed-description slot="description" class="discord-embed-description hydrated" s-id="165" c-id="0.494"><!--r.165--><!--o.0.495--><!--s.165.0.0.0.--><!--t.0.495-->Program your microcontrollers in a fast and robust high-level language. - toitlang/toit</discord-embed-description><!--s.164.9.4.2.fields--><img src="https://images-ext-1.discordapp.net/external/FIymthQry1tjKmeI2C1tCvRQFHUzDxO0k5nc9ALP170/https/repository-images.githubusercontent.com/427260190/af05f930-cb7a-40fb-9dcc-bead2e3ce630" alt="" class="discord-embed-thumbnail" c-id="164.10.4.3"><!--s.164.11.4.4.footer--></div></div></div></div></discord-embed><!--s.157.17.3.1.attachments--><!--s.157.18.3.2.components--><!--s.157.19.3.3.reactions--><!--s.157.20.3.4.thread--></div></div></div></discord-message><discord-message id="m-1314080481570062396" timestamp="12/05/2024 04:06 AM" edited="false" highlight="false" profile="1307277182430875729" class="discord-message hydrated" s-id="166" c-id="0.54"><!--r.166--><!--o.0.496--><!--o.0.497--><!--o.0.498--><!--o.0.499--><!--o.0.500--><!--o.0.501--><!--o.0.502--><!--o.0.503--><!--o.0.504--><!--o.0.505--><!--s.166.0.0.0.reply--><div class="discord-message-inner" c-id="166.1.0.1"><div class="discord-author-avatar" c-id="166.2.1.0"><img src="https://cdn.discordapp.com/avatars/1307277182430875729/9afbc9d6695eccbe28ab4a5b25f76d4d.webp?size=64" alt="Tej" c-id="166.3.2.0"></div><div class="discord-message-content" c-id="166.4.1.1"><span class="discord-author-info" c-id="166.5.2.0"><span class="discord-author-username" c-id="166.6.3.0"><!--t.166.7.4.0-->Tej</span><!--t.166.8.3.1--> </span><span class="discord-message-timestamp" c-id="166.9.2.1"><!--t.166.10.3.0-->12/05/2024 04:06 AM</span><div class="discord-message-body" c-id="166.11.2.2"><span class="discord-message-markup" c-id="166.12.3.0"><!--s.166.13.4.0.--><!--t.0.496-->Well, that was daft. You were right about <discord-inline-code class="hydrated" s-id="167" c-id="0.497"><!--r.167--><!--o.0.506--><code c-id="167.0.0.0"><!--s.167.1.1.0.--><!--t.0.506-->BEACON-SERVICE</code></discord-inline-code><!--t.0.498--> being missing from the scan response. <br c-id="0.499"><br c-id="0.500"><discord-code-block language="" code="ID: #[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address bytes: #[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address type: 0
Name: null
Data: #[0x02, 0x01, 0x06, 0x03, 0x03, 0xaa, 0xfe, 0x11, 0x16, 0xaa, 0xfe, 0x20, 0x00, 0x0b, 0xd2, 0x18, 0x02, 0x00, 0x4f, 0xa9, 0x65, 0x02, 0x0b, 0x0f, 0xd7]
Is Scan Response: false

ID: #[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address bytes: #[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address type: 0
Name: BLE000000011
Data: #[0x09, 0x16, 0x80, 0x20, 0x66, 0x09, 0x00, 0x00, 0x00, 0x00, 0x0d, 0x09, 0x42, 0x4c, 0x45, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x31]
Is Scan Response: true" class="discord-code-block-pre discord-code-block-pre--multiline language hydrated" s-id="168" c-id="0.501"><!--r.168--><code class="hljs language-plaintext" c-id="168.0.0.0">ID: #[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address bytes: #[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address type: 0
Name: null
Data: #[0x02, 0x01, 0x06, 0x03, 0x03, 0xaa, 0xfe, 0x11, 0x16, 0xaa, 0xfe, 0x20, 0x00, 0x0b, 0xd2, 0x18, 0x02, 0x00, 0x4f, 0xa9, 0x65, 0x02, 0x0b, 0x0f, 0xd7]
Is Scan Response: false

ID: #[0x00, 0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address bytes: #[0xbc, 0x57, 0x29, 0x05, 0x90, 0x11]
Address type: 0
Name: BLE000000011
Data: #[0x09, 0x16, 0x80, 0x20, 0x66, 0x09, 0x00, 0x00, 0x00, 0x00, 0x0d, 0x09, 0x42, 0x4c, 0x45, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x31]
Is Scan Response: true</code></discord-code-block><br c-id="0.502"><br c-id="0.503"><!--t.0.504-->Happy to report this is working as needed. Thanks again for your patience and support!</span><!--t.166.14.3.1--> </div><div class="discord-message-compact-indent" c-id="166.15.2.3"><!--s.166.16.3.0.embeds--><!--s.166.17.3.1.attachments--><!--s.166.18.3.2.components--><!--s.166.19.3.3.reactions--><discord-reactions slot="reactions" class="discord-reactions hydrated" s-id="169" c-id="0.505"><!--r.169--><!--o.0.507--><!--s.169.0.0.0.--><discord-reaction name="👍" emoji="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f44d.svg" count="1" class="hydrated" s-id="170" c-id="0.507"><!--r.170--><div class="discord-reaction" c-id="170.0.0.0"><div class="discord-reaction-inner" c-id="170.1.1.0"><img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f44d.svg" alt="👍" draggable="false" c-id="170.2.2.0"><span class="discord-reaction-count" c-id="170.3.2.1"><!--t.170.4.3.0-->1</span></div></div></discord-reaction></discord-reactions><!--s.166.20.3.4.thread--></div></div></div></discord-message><div c-id="0.55" style="text-align: center; width: 100%;">53 messages in total </div></discord-messages><script>const s=document.querySelectorAll(".discord-spoiler");s.forEach(s=>s.addEventListener("click",()=>{if(s.classList.contains("discord-spoiler")){s.classList.remove("discord-spoiler");s.classList.add("discord-spoiler--revealed");}}));</script></body></html>